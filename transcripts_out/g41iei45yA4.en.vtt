WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:59.999 align:start position:0%
hi everyone welcome to the Stellar open protocol discussion in these meetings as always we discuss core advancement proposals caps which are technical specs that suggest changes to the Stellar protocol and they're necessary to allow that protocol to continue to evolve to meet ecosystem needs we live stream the meetings so that you can follow along i do want to that you can follow along I do want to note it's a technical discussion so if you're watching please take a look at the cap link to in the show description cap21 we do keep an eye on the discussion box we do keep an eye on the discussion box and your comments there inform future decisions but our goal today is to talk through some final questions about cap 21 so we'll only really address questions here if they're directly related to that goal once again this meeting is part of a

00:01:00.000 --> 00:01:59.999 align:start position:0%
once again this meeting is part of a caps life cycle they are started on the Stellar dev mailing list and there's a link to that mailing list for anyone who wants to participate in future discussions they're drafted and iterated on before they're drafted or before they end up in this in drafted or before they end up in this discussion in this meeting and based on what happens in this meeting they may get put up for a vote before they may get put up for a vote before the cap committee who decides whether or not to accept or reject a cap after a vote the cap enters a week final comment period so everyone has a last chance to raise questions on that same mailing list if a cat makes it through final comment period it's implemented in a major release of Stellar core which is then put forward for network validators to vote on ultimately at the end of the process it is the network that decides on whether to accept major protocol changes on that note there is currently a validator vote to upgrade the network to protocol 18 scheduled for november 3rd that's next week and so that upgrade would introduce automated market maker functionality to Stellar so it's very exciting it also introduces some breaking changes

00:02:00.000 --> 00:02:59.999 align:start position:0%
it also introduces some breaking changes so if you build on Stellar please make sure to install up-to-date versions of any Stellar sdks you use any Stellar sdks along with Stellar core and horizon if you run a node but today we're discussing a different cap destined potentially for a different protocol cap 21. cap 21 lays the groundwork for building payment channels on Stellar payment channels allow multiple parties to transact off chain and periodically settle on chain and among other things what they do is they make it a lot what they do is they make it a lot easier to build high volume use cases on Stellar so cap 21 it makes technical changes geared towards enabling payment channels are great for scaling payment channels are great for scaling network throughput that's kind of my overview where we are with cop21 we've discussed it a few times revisions were david made revisions recently based on the last discussion that we have and so i think where we're at now is like I think where we're at now is like are there any questions lingering issues anything that we can go over with cap 21

00:03:00.000 --> 00:03:59.999 align:start position:0%
that we can go over with cap 21 especially anything that's preventing it from being put forward to the cap committee for approval so anyone got anything I'm happy to summarize the changes awesome perfect pretty minor so you know there was this thing where like we said that time points should be signed because like databases were like have is more convenient some databases have signed 64-bit numbers but like then we decided actually that was a bad idea so it's mostly like kind of orthogonal to this proposal it's just like since i we're making use of time like since I we're making use of time points and durations and stuff so that's reverted to unsigned well go over the small changes then people wanted a note about like the bump sequence how like that can like invalidate a transaction in the same block the main change is that the main change is that basically when you have when you see two

00:04:00.000 --> 00:04:59.999 align:start position:0%
basically when you have when you see two transactions that are incompatible they can't both be in the same block because like let's say one has sequence number 12 and a min seek ledger gap of two and the other has like sequence number 11. you know previously i can't remember what i said you took I can't remember what I said you took the one with like the highest or lowest sequence number something now you just take the first one that you now you just take the first one that you saw and the reason i didn't do that in saw and the reason I didn't do that in the first place because i was worried the first place because I was worried about well now you're going to see a block and you're going to end up having to like fetch transactions that you don't have it turns out you'll have to do that you it turns out you'll have to do that you have to do that anyway because this kind of stuff can come out in other contexts like if you have two transactions that have the same sequence number and the same fee then you know like and they're flooded at the same time to different nodes well yeah like half the nodes might see one and half might see another and so we're just doing the same thing we just you keep whichever you saw first and you

00:05:00.000 --> 00:05:59.999 align:start position:0%
keep whichever you saw first and you discard anything you receive later that can't exist in the same block as the first one you received is what we david is that what we discussed before because i thought that was actually because I thought that was actually taking the lowest i mean taking the lowest I mean because i thought this was a potential because I thought this was a potential way to artificially like delay forever like that's right you don't think the lowest pre-signed contractions right like a typical of the house first one is right but like a bad first one is right but like a bad you know a bad actor can always submit the lower one right so maybe it's a no it doesn't matter you so maybe it's a no it doesn't matter you just take the first one you see so if something's been flooded and the bad actor floods something incompatible it just the validators won't accept that or they won't forward it they would just well it's more like you have to be first well it's more like you have to be first to submit your transaction right which

00:06:00.000 --> 00:06:59.999 align:start position:0%
to submit your transaction right which is kind of annoying from a security standpoint first like if i have like i think we like if I have like I think we discussed that i I'm not exactly sure if discussed that I I'm not exactly sure if it was relevant to the to the protocol that is described in the cup yeah because you have like all some protocols you have like you know many sequence numbers and the reason you have this gap is it and the reason you have this gap is it allows you to kind of jump forward so i can basically like delay that so I can basically like delay that transaction in an arbitrary fashion if i can have if i have access to those can have if I have access to those pre-signed transactions i don't remember actually i would I don't remember actually I would need to go back to the protocol that is need to go back to the protocol that is described in the cup i think maybe it doesn't matter in this situation can people remember i remember the problem with the

00:07:00.000 --> 00:07:59.999 align:start position:0%
I remember the problem with the old one was that the problem with the old one was that yeah you could keep yeah you could keep submitting something that would like you know bump the age or whatever so and so now it's it doesn't matter it's just like whichever one you there's nothing I mean I guess there's potentially like a continued race but there's nothing that like inherently but there's nothing that like inherently guarantees that the attacker can win the race the disclosure yeah like I'm looking at the protocol that described in the cap so like the disclosure transaction is it using the mean sec

00:08:00.000 --> 00:08:59.999 align:start position:0%
the mean sec like those ranges all now yeah so basically you can and then the second one uses mince so it's only the mean think age that would be affected and we don't i think would be affected and we don't I think we don't care in this context because dude it depends directly from the yeah the disclosure is not impacted by this flood first type of thing right because it doesn't have that mean age condition okay so then it's i think yeah like now okay so then it's I think yeah like now i remember like it's I remember like it's for this particular protocol it's it it's fine to take the you know an arbitrary one yeah so i mean it doesn't really come up in so I mean it doesn't really come up in this protocol because all of the disclosure transactions are compatible like they could all yeah exactly yeah but you could all run them all in the same block yeah

00:09:00.000 --> 00:09:59.999 align:start position:0%
so does that mean that the way that things are written right now in cap 21 the question this take the first one you see approach seems to work for people cool great yeah it's also simpler to implement yeah i think we actually implement yeah I think we actually discussed some of that last time which was but it's not perfect in a way that like but it's not perfect in a way that like already other situations aren't perfect like two transactions with the same sequence number and fee so it doesn't make any it doesn't make things worse when you say the first that you see that means that is submitted first in real time yes but of course the i mean of course yes but of course the I mean of course before consensus different validators will see things in different order right i think i don't propagate through right I think I don't propagate through the network so but i think we you know we already

00:10:00.000 --> 00:10:59.999 align:start position:0%
but I think we you know we already accept the fact that you may need to kind of refetch the block you know while it's being nominated so david are there other changes that we should walk through that's it wow john i didn't have any issues when i mean I didn't have any issues when I mean there's some typos and stuff but i don't there's some typos and stuff but I don't know if they're you know worth going through lee I remember that you were doing some like experiments on the like some like experiments on the kind of performance you can get out of this i remember you were considering this I remember you were considering different kinds of cases and different like structures of payment channels that you could do like synchronous and asynchronous and all these other kinds of things do you want to give us like some context on what the to give us like some context on what the kind of outcome of all of that was what kind of outcome of all of that was what the limitations are of this proposal in the in the land of what you kind of were experimenting on i don't know because i like the

00:11:00.000 --> 00:11:59.999 align:start position:0%
I don't know because I like the it's very clear to me that this produces payment channels and they work but it's not like having not done any of the experiments myself it's not clear to me what's the limitation like what's the best payment channel you can build here in terms of throughput in terms of all these other things yeah in terms of yeah so i think there's a couple of yeah so I think there's a couple of things here so we've been doing experiments to validate does this produce a payment does this produce a payment channel that's safe does a producer can you build a payment channel with this that's predictable that interacts with things like issued assets well interacts with things like regulated assets and yeah like what sort of performance can you get out of it i think the can you get out of it I think the performance thing is something that we're still experimenting with so and it's still something that we're figuring that out and we're figuring that out and in terms of everything else what we've seen you know we have discovered

00:12:00.000 --> 00:12:59.999 align:start position:0%
is this better okay yes so what we're seeing is that it works really well with issued assets and we've written up a more a thorough sort of description about how you would implement this so that it's safe you know with trust lines and can be predictable with trust lines and we have ideas as well for how this would work with regulated assets things like the assets that use ecosystem standards like sep 8 and it looks like it fits those fit those use cases well as well so i fit those use cases well as well so i think the experimentation we've done to validate does cap 21 enable payment channels sufficiently then i think the answer is sufficiently then I think the answer is yes it does in terms of like you know what problems we haven't solved yet like you

00:13:00.000 --> 00:13:59.999 align:start position:0%
problems we haven't solved yet like you mentioned you know asynchronous payment channels and we've kept 40 that we've discussed previously that we want to is sort of being batched together with cap 21 we can do you know single message payment channels which is payment channels which is really i think interesting so i can really I think interesting so I can send you a message and that's all that we have to do for and that's all that we have to do for you to receive everything you need to execute that payment that doesn't actually have to be any further communication but i think what we haven't figured out but I think what we haven't figured out everything you know for how to implement that type of thing so i think there is still type of thing so I think there is still more experimentation to be done to figure out other like with those experiments do we does it make sense to wait to do we does it make sense to wait to accept a cap like this into pending the results of those experiments because they might affect the cap itself or are or not

00:14:00.000 --> 00:14:59.999 align:start position:0%
is that question directed at me or i think so basically it sounds like there are more experiments that you want to do to sort of verify or find out certain things about the way that these payment channels that are enabled by cap 21 and cap 40 would perform correct so i mean i think we can experiment so I mean I think we can experiment we could experiment with this forever yeah and there's always aspects of this that we can improve i think what we've proven so far I think what we've proven so far and what we've coupled with cut 40 into cup 21 is at a point where like i don't think we need to do more like I don't think we need to do more experimentation with it to try actually using it in some in use cases so yeah i don't think this needs to be yeah I don't think this needs to be blocked on more experimentation great

00:15:00.000 --> 00:15:59.999 align:start position:0%
yeah like I think like with the at this point we're probably not going to be blocked on the actual cap itself like in terms of from a technical standpoint i think it from a technical standpoint I think it makes it's more of a available of more like prioritization and is that like do we want to accept this now because we typically what we want to do is that we typically what we want to do is that we don't want to accept the cap that is we don't want to accept the cap that is going to linger for a year or whatever so it's like i think so it's like I think what i would like to see is either like what I would like to see is either like and that's a you know appealing to the ecosystem like people you know like people you know coming forward you know if they are really interested in this or we're going to have to find somebody identify ourselves somebody in the ecosystem

00:16:00.000 --> 00:16:59.999 align:start position:0%
ecosystem so that would be my and that's i think it's going to be kind and that's I think it's going to be kind of the next step for this one i mean i the next step for this one I mean i think in terms of timing like you it's you know you need to kind of accept the cap sometimes in order to attract the users right and if you look at you know like obviously we've had things like multiplex accounts where you know it's been a long road but it you know it's been a long road but it seems like there's like valid use cases and so people are gonna be quite happy to have it in the long run i think it's definitely the same thing I think it's definitely the same thing in this because it like fundamentally adds new capabilities that people haven't thinking of things like you know in addition to payment channels right this also allows like new forms of account recovery and things like that and but the thing that's the thing about this cap is that it could be that we need it in like a it could be that we need it in like a big hurry right like it could be that you know it turns out some new use case you know it turns out some new use case comes along that is like super popular and requires like fairly high

00:17:00.000 --> 00:17:59.999 align:start position:0%
requires like fairly high transactional throughput and so once something is in core then it's like you know people can update the applications to work on it much faster but the cycle is such that you know if but the cycle is such that you know if some amazing use case came along and then had kind of explosive growth that required payment channels it would that project would basically die if it that project would basically die if it had to wait for it to like go through had to wait for it to like go through the Stellar core release process so i think we should get a version of this deployed into core where and you know if we have to revise it you and you know if we have to revise it you know it's a union right we can have a subsequent version of this but it's better to have something out there current the things that you have to do to compensate for not having this range from it's impossible like the account recovery stuff is like basically like almost impossible to like you need like a huge number of like just you need like a huge number of like just extra accounts to each have their own

00:18:00.000 --> 00:18:59.999 align:start position:0%
extra accounts to each have their own sequence number and stuff and it's just like so I have a question nico which is how do you estimate the cost of implementing this because obviously there's tension here between you know you want to see that there's ecosystem use cases but like david says if you know if like a monster use case shows up and the network is not ready in time like is this is there an opportunity cost here I mean like yeah I mean it's like everything else like i think we have to everything else like I think we have to go like i think like I think most likely from what it looks like the changes that from what it looks like the changes that are going to be the more complicated things in as part of that cap are probably going to be around the overlay type of changes that's what it looks like to me the latest change should make it simpler right because well you still have to do it in a safe well you still have to do it in a safe and efficient way and blah i mean and efficient way and blah I mean that's what it looks like

00:19:00.000 --> 00:19:59.999 align:start position:0%
that's what it looks like especially because we have the prototype that we put together for the actual implementation to this is one part i think the I think the other part was around i think the other part was around I think the question mark on testing like the test infrastructure that we have which is kind of broken in the in this context I'm not sure exactly how much work this is going to be i mean like to answer the going to be I mean like to answer the last question I mean it's not the cheapest cup you know we've done it's i would probably put it as like a I would probably put it as like a you know medium in terms of like complexity you know whatever that means you know so like if we were starting to let's say work on this like in q1 next year it would probably be done in q1 i don't know the implications on like

00:20:00.000 --> 00:20:59.999 align:start position:0%
I don't know the implications on like the sdks and so on though like but it looks like they are basically not like there is not a whole lot going on like there is not a whole lot going on there it's very similar to the change we did for when we like the i think like did for when we like the I think like the when we changed the envelope before without the actual it's a little easier yeah it's like a little easier because there's no max account which was the big no mess it's still like yeah like all the sdks have to upgrade that situation yeah i can talk about the sdks a yeah I can talk about the sdks a little bit because i prototyped making little bit because I prototyped making them change the core horizon and then the sdks and i obviously took shortcuts the sdks and I obviously took shortcuts around testing but the sdk part was very straightforward actually so i think straightforward actually so I think there'll be very little it'll be a lot easier than when we introduce the envelope a lot easier

00:21:00.000 --> 00:21:59.999 align:start position:0%
introduce the envelope a lot easier than when we introduced must accounts and I think even the core changes were relatively straightforward in terms of when you just focus on the functionality but then it definitely got a bit fuzzy when trying to figure out how to how trying to figure out how to test this in the existing test tests and I'm not that's familiar with the style called codebase so it was definitely challenging so i think that's probably right too and I think that's probably right too and then i think in horizon then I think in horizon the horizon has this transaction queue where you submit transactions they go into a transaction queue they get ordered by sequence number and then gets submitted when that sequence number is ready to be processed so it allows people in the ecosystem who are using horizon just submit transactions in any order and horizon just sort of smooths that experience over for them and i think there is some you know a little

00:22:00.000 --> 00:22:59.999 align:start position:0%
think there is some you know a little bit of work to do there to make that bit of work to do there to make that work with min sequence numbers but other than that the rest of the horizon changes were pretty straightforward as well something that I want to mention too is see nico was like appealing to the ecosystem like we want to find out what use cases people have for this you know we've got meridian coming up in soon and we are going to be talking about cat 21 cap 40 payment channels how it actually works there and we will talk about you know the performance we should have the performance experiments done by them as well so if that's something that's probably like worth watching

00:23:00.000 --> 00:23:59.999 align:start position:0%
so it seems like where that leads us is technically this cap feels sound there are further experiments that are happening to test performance issues there's a question of whether or not we should prioritize implementation of it that we can try to figure out offline and we would love to hear from people in the we would love to hear from people in the ecosystem about any use cases because that would definitely help identify this as a priority although it's not necessary that we hear that but we'd love to hear that we hear that but we'd love to hear from anyone who might want to use this and finally there will be more info on this at meridian which is a good time to this at meridian which is a good time to learn more out there and also possibly come to us with some idea of how you come to us with some idea of how you might use this does that all sound correct yeah but you know it's also like this isn't also an insurance policy right you don't go around like asking people like you know what are your use cases for insurance or whatever right

00:24:00.000 --> 00:24:59.999 align:start position:0%
cases for insurance or whatever right like so yeah no I understand I don't know i don't think it's necessary right I don't think that it has to be the sole criteria to make us decide how to prioritize this but if someone is like i know what i need this for and they told know what I need this for and they told us that would be helpful right yeah but I don't think it's that's a good reason to delay accepting it today yeah I mean just like procedurally you're gonna get more data you're always gonna get more information by delaying until it's too late I mean I think procedurally we there's one person jed couldn't make it today and so i think that actual acceptance and so I think that actual acceptance would have to happen asynchronously offline and so for me i think the takeaway is for me I think the takeaway is that we should put it in front of the

00:25:00.000 --> 00:25:59.999 align:start position:0%
that we should put it in front of the cap committee and see what you guys think about accepting that's kind of where I'm at i don't know any objections to that plan and cap 40 as well because yeah and so i guess only because yeah and so I guess only objection to cap 40 was the cap 21 hadn't been accepted yet so that's correct we should people should go on record now as having any suggestions for cap 40 or we should move forward with that one as well no it should move with at the same time okay cool well then I think the next the follow-up action is to basically put both of those and say hey cap committee take a look and see if they get approved which we can do asynchronously is there anything else are we done for the day

00:26:00.000 --> 00:26:59.999 align:start position:0%
I take that silences awesome well once again thanks everybody for joining thanks so much for everyone watching and again please make sure that you prepare for the protocol 18 upgrade the vote is on tuesday november or wednesday november 3rd so install up-to-date software before then and yeah if you have anything exciting to say about payment channels make sure to join the discussion or check in with us because we would love to know about use cases that this would enable and we will see you next time and at meridian thanks everybody
