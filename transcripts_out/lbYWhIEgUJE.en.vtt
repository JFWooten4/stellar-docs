WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:59.999 align:start position:0%
I think that's our cue hello everyone and welcome to the Stellar open protocol discussion as always in these meetings we discuss core advancement proposals aka caps are technical specs that suggest changes to the Stellar protocol in order to allow the protocol to continue to drive forward make progress evolve to meet the needs of the ecosystem these meetings if you're watching this is probably pretty obvious are live streamed so that you can follow along i do want to know this is a very I do want to know this is a very technical discussion right so if you're watching you probably want to take a look at the caps that are linked to in look at the caps that are linked to in the show descriptions as are the previous conversations about those caps on the Stellar dev mailing list I'm not going to identify all the participants they're also listed there so you can look them up they're qualified so today what are we doing today we will so today what are we doing today we will again discuss cap 42 multi-part transaction sets which was what we

00:01:00.000 --> 00:01:59.999 align:start position:0%
transaction sets which was what we discussed last time but it's been significantly revised since that discussion we are also going to have an initial discussion about cap 44 speedx configuration and we'll get into what those proposals entail in a minute but first i want to give a quick word but first I want to give a quick word about the life cycle of a cap and there's a purpose for me saying all this that i'll get to so this meeting is really just part of the process of the creation and implementation of a cap open discussion about caps it happens on the Stellar dev mailing list there's a link to that in the event description as well so if you want to join that's the well so if you want to join that's the current discussions or future discussions sign up for that mailing list caps are drafted and sort of iterated on based on the async feedback and suggestions that come in via that list before they end up here being discussed in this meeting so in this meeting we go in this meeting so in this meeting we go over very specific questions and the goal is to get a cap ready to move on if goal is to get a cap ready to move on if a cap is ready it may be put up for a cap is ready it may be put up for a vote before the cap committee and they decide on whether or not to accept it so after a cap committee vote by the way so after a cap committee vote by the way the cap enters into a one week final

00:02:00.000 --> 00:02:59.999 align:start position:0%
the cap enters into a one week final comment period and that gives everyone a chance to sort of raise questions again on the Stellar debt mailing list if cap makes it through a final comment period it's implemented in a major Stellar core release before that Stellar core release actually hits the network validators have to vote to upgrade the network to accept that release and so ultimately any sort of proposal that makes it into implementation into a Stellar core release is accepted by the network through that governance mechanism so part of the reason I'm bringing all that up today is that before we go on to up today is that before we go on to the main discussion about caps 42 and caps 44 we're going to revisit a couple of caps cap 21 which generalizes transaction preconditions and cap 40 which adds a new signer type that multiple parties can use to more effectively share a transaction set for signing so these are two caps that we sort of got pretty much two caps that we sort of got pretty much across the finish line they have they basically include changes that are helpful for people that are looking to develop innovative solutions on Stellar specifically payment channels and bridges to other network the goal of these is to sort of unlock the potential

00:03:00.000 --> 00:03:59.999 align:start position:0%
these is to sort of unlock the potential for greater interoperability so again these caps they already went through the ringer they're currently in a waiting decision so that's their official status awaiting decision but first things first i think the cap committee is ready to approve both caps and so i want to check in with the cap and so I want to check in with the cap committee and see if that's true now the cap committee is jed and nico and david and jed who is not here i checked david and jed who is not here I checked with before and he is ready to approve nico and david are you also ready to approve or is there more to talk about for capital 21 david you approve okay yeah it's the same for me yeah same for me like the there was a change yesterday or the day before on cap 40 but it's yeah it's a minor change so we're good all right approved so after this meeting I'm going to change the status of those caps to final comment period pending approval and again that gives everyone a one week window to like raise any final questions or concerns

00:04:00.000 --> 00:04:59.999 align:start position:0%
questions or concerns i guess if a legitimate concern comes I guess if a legitimate concern comes up during that time we can send it back up during that time we can send it back to draft mode but if there's no concerns legitimate concerns that arise during that time those caps will be approved and that means they're going to be ready to move on to implementation for inclusion in the next protocol release which is protocol 19. so as of right now shortly after this meeting cap 21 and cap 40 officially move into final comment period all right now on to the real meat of the all right now on to the real meat of the matter we're going to talk about these two caps and the first one that we're going to talk about is cap 42 multi-part transaction sets this cap gives validators control over which fee policy to use for individual transactions included in a ledger we discussed it two weeks ago and there were several suggestions about how to improve it and based on those suggestions it was revised and so i think to start with let's just get a quick overview of the changes to cap 42. nico you want to take that yeah and yeah so what i ended up

00:05:00.000 --> 00:05:59.999 align:start position:0%
yeah and yeah so what I ended up doing is basically i added the basically I added the notion of execution phase that in the short term we are not going to have a short term we are not going to have a new phase it's more incorporation for things like speed x where we expect to have that being done in as a separate phase isolated from the existing transaction subsystem and then within a phase what i did is and then within a phase what I did is that yeah after our conversation last time like i it was clear that we needed to maybe clarify better like what like when transactions or make it more explicit i guess that or make it more explicit I guess that there was actually full control of the fee regime that was given to validators so what i did was i added a new

00:06:00.000 --> 00:06:59.999 align:start position:0%
tag that allows validators to basically use the actual feedback as fee being charged for certain transactions as well as having the possibility of having a discounted rates when it comes to for example i mean actually that's what we do today I mean actually that's what we do today like we actually give large discounts to transactions that are when we're not in search pricing so that's what i did i also added so that's what I did I also added some clarifications on how this makes and why this makes sense i think there were more questions I think there were more questions actually and that maybe where we can maybe like spend some more time today around like are we basically defeating like the existing guidance that we give people

00:07:00.000 --> 00:07:59.999 align:start position:0%
existing guidance that we give people when we say bid whatever you feel comfortable with and then the network will you will actually you're unlikely to actually pay for what you're bidding if you're over bidding and i think you're over bidding and I think there's a this is a fair question so on that yeah I don't know if david or john i know like we use i mean david or john I know like we use I mean I you know i like this new version i you know I like this new version i think it's a lot cleaner I think possibly in line with what you're saying if i have one nit what you're saying if I have one nit to pick in the backwards in the protocol upgrade transition we state as this cap does not change transition semantics i think maybe we transition semantics I think maybe we should just qualify this or you know like you know changes the fee but it's within this originally permitted semantics or something

00:08:00.000 --> 00:08:59.999 align:start position:0%
something but that's pretty that's pretty nitpicky yeah i mean i think yeah like yeah I mean I think yeah like yeah i can fix that definitely like I can fix that definitely like i think the I think the interesting thing that was raised both by john that is on the call and by lee by john that is on the call and by lee that is not here today are actually good questions around like today you can basically bid by a factor of like a million let's say by a factor of like a million let's say and you're actually very unlikely to be pay for i mean you're exposing yourself to for I mean you're exposing yourself to that but then a bunch of other people would have to pay that type of fee whereas with this proposal depending on which the data you run into you may actually pay that fee so like for me the rationale for that is that we are actually kind of

00:09:00.000 --> 00:09:59.999 align:start position:0%
kind of put it's i think i put that as put it's I think I put that as my notes as we can actually rely on some of the a contract between validators that the you know the responsibility of a validator is to actually have lower fees and then we can actually use in a way and then we can actually use in a way that as an expectation for validators when they just like today when you run a validator you have to have an archive like you basically have a contract with other validators with other validators and at any time other validators can basically decide to remove that faulty or not fully compliant validator from their current set and then we end up with i think a system that with I think a system that yeah that's realized more on this contract that it's not necessarily this contract that it's not necessarily a technical contract it's a

00:10:00.000 --> 00:10:59.999 align:start position:0%
a technical contract it's a kind of a in order to be aligned with the values of the network you have you know you shouldn't be forcing like isolating for example transactions so that they just to mess with people just a question if it's more of like a just a question if it's more of like a social contract or a set of expectations that validators follow is there a method for them to know if other validators are living up to that yeah so that's actually a good question so like it's we actually have a similar contract today with like validators should not be excluding certain transactions from their current set like you would like the only way you can discover that today is by looking if there are patterns where some transactions let's say for certain assets or things like that are always excluded by some validators you can actually go through history this is all public and you know

00:11:00.000 --> 00:11:59.999 align:start position:0%
all public and you know you can basically kind of audit the behavior of the details and i think we and I think we this is a similar problem here where you want to have the tools for auditing validators when it comes to this new power that we are giving them so the new power that we are giving them so the data will be in history i think what we have right now is that I think what we have right now is that in horizon for example we don't actually expose much of the sap information so we don't know if what was actually happening during consensus runs for example like we don't know if some people are never aligned with other people like for example so I think this is the type of work that can be done either by yeah by the sdf or by other either by yeah by the sdf or by other people in the community to kind of raise the bar just like we have

00:12:00.000 --> 00:12:59.999 align:start position:0%
the bar just like we have raise the bar when it comes to what it means to run a validator with you know like projects like Stellar b right that are showing like Stellar b right that are showing when validators are flailing or things like that so I mean this is like what you've just mentioned is sort of one solution like yes we need a we need a you know some kind of validator conventions and ultimately there needs to be some kind of companion document that you know this guy might not be a cap but it know this guy might not be a cap but it discusses a like how you configure your Stellar core to express these policies and like what we make easy and hard to and like what we make easy and hard to do like in the kind of default Stellar core release it's obviously gonna have a big impact on this but i think there's big impact on this but I think there's another side of this which where you know we don't want people to have the trust validators so we should be maybe promoting fee bump transactions like a bit more heavily right i mean certainly bit more heavily right I mean certainly you know one thing that like wallets could do is they could sort of by

00:13:00.000 --> 00:13:59.999 align:start position:0%
could do is they could sort of by default like you know whenever you sign a transaction it would also sign like a couple of fee bump transactions that it would kind of like resubmit you know like more expensive versions if the first one didn't get through or things like that so i think we should like that so I think we should be you know in terms of backwards compatibility i think we should not compatibility I think we should not you know i think we should make clear you know I think we should make clear that there may be some expectations on the ecosystem on the ecosystem the sort of wallet side yep that yeah I'm sorry justin go ahead i was yeah I'm sorry justin go ahead I was just gonna say because on some level there needs to be education and tooling to understand how to manage dynamic fees more actively because right now as nico said you can just set your highest fee and dynamic fees the network you know what to expect but you won't necessarily is that so what you're saying david is that we would need documentation and potentially tooling to in order to educate people to the expectation that they like wallets will need to more actively managed dynamics

00:14:00.000 --> 00:14:59.999 align:start position:0%
need to more actively managed dynamics or maybe we need a feature an optional feature for horizon that people would enable on their private horizons maybe on the public ones but where you submit three versions of a transaction and it sort of like keeps submitting like the more expensive one if the previous one hasn't cleared in some period of time or something right you know I can't design the feature on the fly but it seems like the feature on the fly but it seems like something you we might want to think about and if people if want to take their wallets offline or not be sort of constantly monitoring the network maybe this should be part of this should be part of horizon maybe this is an incentive for organizations to run their own horizon because they can you know control this better asked me to say the following the cp is built on reputation the concern that a reputable validator is going to go rogue and build an alternative transaction set nomination rule set is a bit far-fetched and the ecosystem can build tools that monitor validators for behaving sensibly

00:15:00.000 --> 00:15:59.999 align:start position:0%
monitor validators for behaving sensibly sorry but there's a big space sorry but there's a big space between rogue and between like something like i might not agree with right like I might not agree with right so i think like the point is like so I think like the point is like there could be legitimate disagreement about this and we want users to be in about this and we want users to be in control or to you know they might you know rather not have their transaction be executed if they're gonna get charged way more than somebody else I think like as far as tooling goes i think like you as far as tooling goes I think like you know one thing that seller beat could do that would do would be really cool in this context would be like hey like what are the like you know every 10th percentile 10 20 30 you know every 10th percentile 10 20 30 etc fees that this validator is nominating if validators are being like pretty fair you would expect every validator to nominate basically the same percentiles total fees more or less and that would give a lot of people evidence about like oh you know like this guy's being a big jerk

00:16:00.000 --> 00:16:59.999 align:start position:0%
know like this guy's being a big jerk and really just trying to get people to pay whereas other people aren't doing that but i agree with you david that you that but I agree with you david that you know that doesn't change the fact that you know your validator might say like hey like i think this type of hey like I think this type of transactions pay high fee and this one for payloafi i think the opposite they're equal I think the opposite they're equal distributions and so like our stats look the same but and so like our stats look the same but we're treating people differently maybe all the validators agree but it just turns out that it's there's some small number of like legitimate transactions that are hard to separate from spam right and so you need to I think just not participate we need an up we participate we need an up we don't people shouldn't be forced into participating in the dutch auction right they should be able to you know control their you know maximum fee to ensure that they're not paying more than like twice as much as other people and that's something that's it's doable it just requires a little bit of support on the you know sort of platform side of things for me kind of the like i've been thinking about this whole thing since we spoke about it

00:17:00.000 --> 00:17:59.999 align:start position:0%
thing since we spoke about it last was that last thursday two thursdays ago whenever it was and i've kind of convinced myself that in the long run like looking like let's say that we did this in x months and say that we did this in x months and then you look at x plus 12 months in the then you look at x plus 12 months in the future like probably everything is fine everybody adapts to the new world you know maybe some new tooling develops like david is talking about everybody switches to kind of this lower fee mentality where you don't just bid like 10x 100x whatever what you're willing what you actually want to pay at the present but like looking right now you know i was looking at dashboard for the last couple minutes like every minute and the 50th 60th 70th percentile fees have been sitting around 20 000 stroops pretty much non-stop in that period sometimes it's been the 60th 70th 80th but 20 000 troops and that's you know about one-third of the total traffic so there are a lot of people who are bidding way above the fees that are actually getting accepted in the short run if

00:18:00.000 --> 00:18:59.999 align:start position:0%
getting accepted in the short run if those people aren't paying attention those people are going to be pretty sad i think yeah they're just 100 million I think yeah they're just 100 million stroop bid yeah so i mean i guess bid yeah so I mean I guess that's 10 lumens or whatever is that 250. yeah it's not insane I'm i have to say yeah it's not insane I'm I have to say i've literally said to many people and i just do a hundred thousand troops and I just do a hundred thousand troops you'll be fine don't worry about it just said 100 and you know i'll try to tell those same people if that changes that made sense right if that changes that made sense right so this change i think what you're so this change I think what you're saying yes yeah this short-term pain long-term gain thing that you're pointing out john may well be true I mean like I think the difference is that like yeah like if for example like these fees of the network are like you know around like the minimum like when you're not in such pricing price right that's kind of where you are like if you paid like even

00:19:00.000 --> 00:19:59.999 align:start position:0%
like if you paid like even 100 times more than that like that still gives you like some advantage compared to other people like you're still doing some level of bidding like i think that's the level of bidding like I think that's the difference with this cap is that you would not be bidding like yeah like a million times more like you would be bidding only you know a thousand times more i mean that that's i think that's the I mean that that's I think that's the shift is that you have to be maybe closer to what you want to pay unless like in some situations like the I'm like the people like putting 10 lumen as a the people like putting 10 lumen as a fee i mean this is what fee I mean this is what we i think discussed in the we I think discussed in the past those are the type of numbers i would expect when if you do like I would expect when if you do like some trades that actually are going to be valued at more than that and i think those over the long term

00:20:00.000 --> 00:20:59.999 align:start position:0%
and I think those over the long term they will continue to actually be bidding that high and that makes sense but they will actually pay them pay that that's the difference well those fees should come down quite a lot actually and that's one of the things that made me think in the long run this would be better like right now imagine that you're racing for an arbitrage opportunity let's say the arbitrage opportunity using the numbers that we were just using is worth you know 11x allowance you're like I'm willing to bring 10xl I'm going to try to get you know one excellent profit in the worst case maybe you're even willing to bid 11. but let's just say 10 for the sake of but let's just say 10 for the sake of argument well right now it's like I'm going to bid 10 but I'm probably going to pay 100 troops a thousand strips whatever based on like what normally happens during surge pricing and so you've got let's say like 500 people or something trying to do this one of them wins the other 499 transactions go in the garbage but in the real world where everybody is actually bidding for this you know 10xlm thing and they're going to pay 10 meaning with this proposal when i say in the real

00:21:00.000 --> 00:21:59.999 align:start position:0%
this proposal when I say in the real world everybody would actually lose money and expectation so they'll all have to drop their fees by a factor of the competition so fees will actually like their peak fees would come down by a factor of 500 fees would come down by a factor of 500 in this example so that's pretty cool that gives other opportunities a much better chance to be competitive so i think long term there could be so I think long term there could be benefits beyond just like you know people bidding closer to reality but also just like changing the discrepancy between like I'm trying to send a payment to my friend and I'm trying to take advantage of some arbitrage opportunity yeah I got one more question from tomer here actually it's too how do we envision validators controlling this will we give them configuration options in Stellar core so yeah like i thought a little bit so yeah like I thought a little bit about this all right like last time there were actually questions around that like are there like certain configs i think it depends on the type of I think it depends on the type of strategies we're going to implement some of the things where i can see some configs

00:22:00.000 --> 00:22:59.999 align:start position:0%
the things where I can see some configs being useful are if we start to have like this type of surprising in a way that is this type of surprising in a way that is doing something maybe over historical data like when you look at the last few data like when you look at the last few ledgers instead of just looking at the current pledger and then as soon as you said the last and then as soon as you said the last few ledgers were then how many right so that would be an example where you have a tunable for the cur like there's another tunable i think cur like there's another tunable I think that i can think of that I can think of that is related to the actually the first example I had in the cap that was can we limit the number of the operations in for that are of the operations in for that are potentially touching the decks right so like that number is an example of a tunable also for that policy

00:23:00.000 --> 00:23:59.999 align:start position:0%
tunable also for that policy but of course you know people can always go around any of those things like they can write custom code if they want so that's a that's for that but yeah for the ones that i think that we will be implementing like they likely will have yes some tunibles in them to potentially even disable them companion document right that would be more in the actual box of yeah so is the general consensus at this point that people feel i feel like i point that people feel I feel like i literally just interrupted justin who's about to say the same thing but do people generally feel good about this now feel bad about this i feel a lot now feel bad about this I feel a lot better than i felt when we spoke about better than I felt when we spoke about this two weeks ago i feel like we're in this two weeks ago I feel like we're in a place where like

00:24:00.000 --> 00:24:59.999 align:start position:0%
a place where like i think we could get people behind this I think we could get people behind this and it'd be a bit of a mind shift but and it'd be a bit of a mind shift but people would feel good about it i don't know if everybody else feels I don't know if everybody else feels the same way yeah i think this has been better than yeah I think this has been better than the much better than the last draft i think much better than the last draft I think it's this is a tool and i think there's it's this is a tool and I think there's understandably some anxiety over like how is the tool going to be used but i how is the tool going to be used but i think the worst case scenario is not terrible that like we just get rid of the dutch auction and the most likely scenario is that people that you know Stellar core has some parameters and like the thing you know it's done in such a the thing you know it's done in such a way that you know it's like simple payments are very unlikely to do this because they would require changing the sequels plus and that yes we understand that certain assets and then overloaded decks may end up getting this treatment yeah exactly like the worst case scenario is that we end up with what basically everybody else in the space is doing and what we used to have before we went and what we used to have before we went from construction which was before the

00:25:00.000 --> 00:25:59.999 align:start position:0%
from construction which was before the fee bump transaction and so i think that fee bump transaction and so I think that there's some i still like the dutch there's some I still like the dutch auction but i think it would have been auction but I think it would have been harder to make the case for the dutch auction if we already had the fee bump and so you know now we've got both options yes i think I think like i don't know if like I don't know if people so and i think that would be people so and I think that would be actually part of how to explain to people like the shift here is that i think by renaming that I think by renaming what we do to discount i think it's actually helps quite a bit I think it's actually helps quite a bit people understand what is actually happening in terms of like you know when you think in terms of like you know when you think of a discount I'm potentially going to give you a discount you go to a store give you a discount you go to a store you actually expect to more or less pay what is you expect to more or less pay what is you know displayed before you start to haggle and i think that's kind of the and I think that's kind of the you know i think you know I think it's more similar to this via slack tomer is asking questions about downstream systems so how do we expect downstream systems to understand

00:26:00.000 --> 00:26:59.999 align:start position:0%
expect downstream systems to understand the fees collected and then he also said dutch auctions are already an oddity in the space so this only makes fees more opaque and then again raises a concern we need to figure out how to explain this to downstream systems so i know that this is a so I know that this is a well i think that's a valid question well I think that's a valid question downstream systems how do we expect to explain this that we've removed the oddity at least some fraction of the time right I think there was a question around like being able to see which groups and all that from horizon from lee on the mailing list I mean the data will be there like it's actually part of the consensus value of the consensus value so yeah like I think yeah we'll probably have to think about how to maybe like expose this a little better from the main api that comes on maybe it's the api also is like going to give better

00:27:00.000 --> 00:27:59.999 align:start position:0%
going to give better idea of like what's going on and the current one is actually also kind of strange because the stats of other if you look at as a of other if you look at as a developer if i hit that api that gives developer if I hit that api that gives me stats about the last five ledgers it's actually not even today it's actually not that great in terms of experience because you're looking at like a lot of people like should i use the should I use the tenth percentile or my year's percentile like and actually you're not even guaranteed and actually you're not even guaranteed of anything by using this they're sometimes because it's only five ledgers and you know past performance doesn't predict future so yeah i think for a lot of developers yeah I think for a lot of developers they just ignore they don't they just say why do i need to check like they've say why do I need to check like they've learned why do i need to check fee stats if i why do I need to check fee stats if i just can set my fee super high and only be charged the lowest and so i guess this comes back in part and so I guess this comes back in part to that question right like if suddenly yeah displaying information about fees in order to make an informed decision is more important i think the so it will be actually

00:28:00.000 --> 00:28:59.999 align:start position:0%
I think the so it will be actually you can still have like the approach can still be done very much in isolation because we you know by like similar to you know what we have today right where people build like some high number and then that's kind of it like now they will have to be a lower than not better than that if they lower than not better than that if they are not comfortable with that higher number and then retry and then do a and then retry and then do a maybe like a like depending on the app right like depending on the app right like it depends like for many applications building like for many applications building like a tenth of a cent is actually fine right in fee and that's kind of the end of the story if like if you really want that transaction to make it but you don't want to necessarily expose yourself to variations

00:29:00.000 --> 00:29:59.999 align:start position:0%
variations I think a fine strategy is just to have like a timeout and multiplier on top or something like that right like and it's not complicated okay i mean i guess if i had one reservation I mean I guess if I had one reservation about this maybe i should just about this maybe I should just voice this now I'm not sure this is a voice this now I'm not sure this is a problem but in the nomination value comparison I'm not 100 convinced that the second item in the item in the four tuple the second most significant item should be total fees that the transaction set will collect an alternative which i don't know if it's alternative which I don't know if it's better but the point is i don't know an better but the point is I don't know an alternative would be to say it's the total pledged fees the total offered fees even if the total collected is less because some transactions ended up in the discount bucket now i understand there's definitely I understand there's definitely a good argument why total fees of course

00:30:00.000 --> 00:30:59.999 align:start position:0%
a good argument why total fees of course is better otherwise maybe validators could like game the system or do other weird things however there's just one scenario that maybe I'm concerned about imagine a situation where we have this thing that we think is not very economically beneficial and it's spam so we say okay we're going to put that in the non-discount bucket and everything else goes in the discount bucket and now you have these transactions that are very important that are willing to pay a lot of money but because they're in the discount bucket two kind of maxed out nomination values that are completely both completely full so have the same number of operations end up favoring the one that collects more fees where it actually even though more fees were pledged to the other one it's just that the other people are getting a discount that maybe they don't even want yeah i mean that yeah that i mean yeah I mean that yeah that I mean i think i don't I think I don't think it like using the total feedback is necessarily a problem

00:31:00.000 --> 00:31:59.999 align:start position:0%
like we do we just need a way to compare right like the quality so i think right like the quality so I think that you know it actually is aligned with the you know the intent yeah so i think yeah like the bid is fine I think yeah like the bid is fine probably so are there other questions to are there other questions to raise here or points to discuss i feel like there's still I feel like there's still issues that maybe already exist on a mailing list is that correct or actually i guess i'll just say it or actually I guess i'll just say it this way i feel like this should that this way I feel like this should that this is not quite ready to move into a this is not quite ready to move into a vote or anything that there still may be some time for marination just to think about a few of these issues including maybe thinking about the downstream implications just yeah i think i want to maybe think I want to maybe add a little bit of detail of like the add a little bit of detail of like the type of expectations for the downstream systems and then

00:32:00.000 --> 00:32:59.999 align:start position:0%
systems and then we can and then we can actually move forward with this one i mean here's another thing we could do that i don't necessarily think that I don't necessarily think is a good idea but just so that it's is a good idea but just so that it's been on the table we've decided it's not a good thing to do so we could so a good thing to do so we could so unfortunately there's no like flags you know section for the fee bump transaction but we could kind of add a new type of fee we could kind of add a new type of fee bump transaction where there's a flags field and sort of you know one of these flags could control could say like basically like this is very important like I'm willing to pay my full i'd rather not have a discount if it like you know risks my transaction having like less chance of getting in so then at least somebody who like their transaction is very important they say like hey don't exclude me just because you're giving me a discount i don't even you're giving me a discount I don't even want that discount yeah i don't yeah I don't think we would of all the strategies we talked so far like we would basically have like those groups right and then within those

00:33:00.000 --> 00:33:59.999 align:start position:0%
groups right and then within those groups you may or may not get a discount groups you may or may not get a discount but even if you do get the discount you but even if you do get the discount you have to be the highest bidder so i think have to be the highest bidder so I think if you bid more than everybody else like you know what I'm saying we'll get in right not necessarily because you might not be in the winning nomination value right I'm concerned what i mean a right I'm concerned what I mean a validator right that's going to craft a set right with all those groups if you bid more than everybody else you will be included not if you're yeah sorry you'll be included in the nomination value but it may get beaten out by another nomination value oh in practice we normally only have like one nomination value right or two yeah that's very small yeah but that's but now we're starting to place you know it increase the amount of trust in you know like that's not what scp is designed to take to guarantee right so yeah i mean take to guarantee right so yeah I mean at this point what you're saying like well the other value right that's from a different validator would also not

00:34:00.000 --> 00:34:59.999 align:start position:0%
different validator would also not include that transaction that is the highest bidder right so that's why I'm imagining i think this is a why I'm imagining I think this is a different problem that you're you have no a that's the same problem the problem is that somebody keeps nominating a block that has more spam transactions and therefore collects higher fees and that value kind of ends up beating out a value with more useful transactions but I think this is more of a like why would other validator if there would other validator if there are more spam values right like this high fee transaction would be nominated by this other validator unless they are actually decided that they would no but i mean like scp is would no but I mean like scp is byzantine fault tolerant right we we're supposed to assume that like some fraction of validators could be misbehaving yeah of course yeah and in this case and so i want to make sure that and so I want to make sure that doesn't like severely impact the

00:35:00.000 --> 00:35:59.999 align:start position:0%
that doesn't like severely impact the you know the what we consider the good transactions can I clarify here is this not solved by switching the second criteria to the total feedback oh sorry if we're just gonna do that then that's fine yeah that's right that's what i said earlier that's right that's what I said earlier oh okay sorry i thought you were oh okay sorry I thought you were gonna consider it but you weren't so that's why i was saying here's another that's why I was saying here's another thing that you do yeah okay sure I could still imagine the utility of like no seriously i really mean to pay like no seriously I really mean to pay this bid flag i just wouldn't support that flag I just wouldn't support that today but if somebody were to come around and be like no like seriously i have a real reason why i really want to have a real reason why I really want to pay these ski bids and waste my money maybe we maybe there is a real reason for that i don't know it yet but like for that I don't know it yet but like that wouldn't be a hard change to make like you were describing about adding a flags thing to the transaction to the debunk transaction right okay so i guess that's another thing is so I guess that's another thing is switching that second value to be keep it instead of what it is now okay

00:36:00.000 --> 00:36:59.999 align:start position:0%
it instead of what it is now okay yeah okay cool i feel like that's in progress I feel like that's in progress and now i think it's time to move on I think it's time to move on to speed x so the next cap for today's discussion is cap 44 speed x configuration speed x is a new design for a fully on chain decentralized exchange that can scale to an arbitrarily high transaction throughput it's implementing it is something we sdf mentioned in our 2022 roadmap it's something that's important to sort of the future scalability of Stellar it's going to take a few caps to implement speedx and this first one is really just about setting up validators so they can configure speed x but rather than me trying to explain that i will pass it i guess that I will pass it I guess i guess to john or maybe to jeff who I guess to john or maybe to jeff who wants to sort of give an overview of what this cap does i'll pass it to john and john if you i'll pass it to john and john if you want to pass it to jeff up to you I'm want to pass it to jeff up to you I'm gonna pass it straight to jeff and what i was thinking is jeff could open with I was thinking is jeff could open with just like a quick pitch on what

00:37:00.000 --> 00:37:59.999 align:start position:0%
just like a quick pitch on what like what speed x is why speed x and like what speed x is why speed x and then maybe i can go and kind of give a then maybe I can go and kind of give a quick pitch on like why we're breaking up the caps into a bunch of different things like why we're going section by section and kind of what this one is about and jeff wrote all the drafts of all of this stuff in the summer and we've just been cleaning it up and kind of like trying to like make it as like trying to like make it as physically simple as possible but all of these ideas are really jeff's ideas so thanks yeah so speedx is a design for trading settling a bunch of trades in batches instead of serially and the reason for this is on the one hand if you this is on the one hand if you settle trades in batches you can parallelize the operational exchange so you can scale to many transactions per second and also to many transactions per second and also by trading in batches you get the market becomes more fair and you get better liquidity between assets that aren't very traded very much and you cut down on a lot of the common front-running attacks or the arbitrage opportunities that

00:38:00.000 --> 00:38:59.999 align:start position:0%
the arbitrage opportunities that we've been talking about that clog up the network as if as for this particular cap speedx needs a certain amount of configuration data in particular the big thing is one control parameters on how you actually run the batch computation and two a way of choosing which assets are traded in the batch and which ones aren't and so what this cap does is take a very and so what this cap does is take a very like the simplest approach towards deciding which assets in the batch namely there's some set list and then the validators can upgrade that with some kind of upgrade protocol but you can imagine the future doing some other way of choosing which assets are traded in the patch and it's not quite clear exactly which kinds of configuration data we need in the cap at this point what actually we need will probably depend on what we finalize for other speed x related caps but this is we'll at least need the data that we have here

00:39:00.000 --> 00:39:59.999 align:start position:0%
and just to just give a little information about like why we're breaking this down into a bunch of small pieces so i kind of learned a lesson after we so I kind of learned a lesson after we did the liquidity pools work where like we produced this like 1500 line cap and it was just like really unwieldy and people never knew what parts of things we were talking about and what are the interactions between things and stuff like that so this time different concept let's break basically let's break this problem into all the logical parts like this the configuration of the upgrades this is like the technical pricing algorithm that we're going to use this is how we're going to get the commutativity and this is how we're going to settle the trade and those are kind of like the four verticals that I'm seeing and so this one came out first because it was short and kind of easy and like it was short and kind of easy and like it was very well established like what the space of options were pricing will come out in the next few days and then we'll keep going but i think jeff we'll keep going but I think jeff already gave a good overview of what's kind of in this particular proposal so yeah and this one contains actually the most controversial part of the speed example is it's actually related to what

00:40:00.000 --> 00:40:59.999 align:start position:0%
example is it's actually related to what we just talked about with validators being able to do things that maybe they shouldn't have control of so maybe we should start right on to that particular topic yeah just quick question like so when they're determining this list of assets this is an extra protocol just like decision that they're somehow making like they're saying hey guys i think like they're saying hey guys I think these are the assets that we should add and then they all I sort of imagine there's like a listing process or something where you know like we have this whole set of upgrades for like changing the transaction set size or whatever so i'd sort of imagine we'd do a similar kind of mechanism there but like whatever we do it would be kind of outside the scope of the protocol you know whatever the ecosystem wants to do is their system that's what they should do i my hope is that this list isn't changing like every second that would be really unnecessary like so it should be the type of thing that so it should be the type of thing that people can coordinate pretty easily on

00:41:00.000 --> 00:41:59.999 align:start position:0%
people can coordinate pretty easily on like a day-to-day basis but the real question i have here is but the real question I have here is kind of like are people going to be upset about handing this kind of power to validators i mean it's I mean it's very much like not in the kind of it's very much like not in the kind of scope that we currently explore at least before cap 42. it's very much the same kind of power of like hey like these assets live in this privileged world where they have access to this feature and these other assets don't do people feel bad about this because i have something i mean because I have something I mean personally the way go ahead i mean i guess the I mean I guess the thing that i would the thing that I would like to at least consider is that instead of one magically privileged speed x you could at least theoretically have room for like multiple speed x's where asset issuers could you know by default be included in any speed x but could also like say like which speed x they want to be included in so they could kind of revoke permission for being in a particular speed x so if

00:42:00.000 --> 00:42:59.999 align:start position:0%
for being in a particular speed x so if you did this then this is seems like a you did this then this is seems like a more Stellar way of doing things because then in practice like all the assets anyone would care about will probably all want to be in a speed x together but all want to be in a speed x together but if some another bunch of random assets wanted to be in a speed x together like wanted to be in a speed x together like you know importance is in the eye the you know importance is in the eye the beholder no one's to no one is to say beholder no one's to no one is to say that like assets a b and c are less that like assets a b and c are less important than assets x y and z it's just that you know x y and z are happy together and a b and x y and z are happy together and a b and c are happy together this is an interesting concept not something that actually came up in the earlier discussion at all so already i I'm intrigued already I I'm intrigued i guess my first kind of like I guess my first kind of like reactionary question to this is like the main motivation for breaking out like a speedex list is just computational concerns so how does that square with having multiple lists or having to like you could even imagine a world where like everybody's

00:43:00.000 --> 00:43:59.999 align:start position:0%
imagine a world where like everybody's like okay well you know like there's this one list which has this preferred status but like let's put everything else into this other list well because the problem is that the list themselves would have to be the list themselves would have to be capped right because there's a super linear stuff in the kind of linear stuff in the kind of number of assets right and so if you can number of assets right and so if you can you know it's cheaper to compute two small two speed x's with like 100 assets than one speed x with 200 assets isn't it certain parts of it at least i haven't figured out how to scale beyond some fixed quantity of assets effectively which parts are those so the price computation the number of rounds that you need seems to like increases somewhat as the number of assets goes up and but the big limitation i think is the big limitation I think is the linear programming follow-up phase

00:44:00.000 --> 00:44:59.999 align:start position:0%
the hand rolled the hand world solver that i wrote for Stellar over the that I wrote for Stellar over the summer was turns out doesn't work very well at all past like 20 assets if very well at all past like 20 assets if you take an office shelf solver i was you take an office shelf solver I was getting it to 50 to 80 and then a custom hand rolled solver that i had all sorts of you know that I had all sorts of you know sparse optimizations and everything in it i could push that to 100 but it I could push that to 100 but the performance of that really starts to increase very non nonlinearly after a while I don't I wasn't able to push it past like a 100-ish ish so i think some other technique might be so I think some other technique might be needed there what's the incentive for an asset issuer wanting their asset to be in a speedex list you get basically more liquid trading and or like better usability on the asset

00:45:00.000 --> 00:45:59.999 align:start position:0%
going on what david was saying so one of the things that comes up in speed x is like in the speedx pricing cap that I'm still in the middle of working on based on jeff's but we spoiler alert we agreed on this kind of scheme where basically like in the pre-nomination phase validators nominate a set of prices and then in order to see if those prices are like in order to see if those prices are like relatively sane you know we also like have all the validators do like the standardized computation using the solver parameters in the config to try to produce a second thing and then we choose whichever price to seem like they're better that second phase requires that linear program that jeff was talking about which he doesn't know how to scale up very high

00:46:00.000 --> 00:46:59.999 align:start position:0%
very high but if we just said like hey like we have this one speed x that we're gonna do both phases for we'll do the pre nomination and the post nomination and that's how we'll try to produce a really good reliable set of prices and then for the second phase or sorry for all the other speedx lists you have to both present the prices and the network flow that's already rounded so we don't need to do the linear program then we avoid that scaling issue and then maybe we can do more we don't do then maybe we can do more we don't do the internal calculation we just accept those prices maybe they're good maybe they're bad and that's the cost of not being in that and that's the cost of not being in that main list but that is a lot fairer than saying like you're either in the list you're not nonetheless i mean somebody has to do the linear I mean somebody has to do the linear program either way though right sure but i guess my argument would be if you I guess my argument would be if you can't produce a solution you won't trade right but it's not necessarily people who want to trade who are

00:47:00.000 --> 00:47:59.999 align:start position:0%
who want to trade who are producing the solution it's the people who have access to the order book because they're you know on you know validators in the network but like you could very much like bear with me for crazy ideas you could very much imagine running you know like hey like you know we're the people who like want the speed x to the people who like want the speed x to happen we run this web service all your validator has to do is hit this all your validator has to do is hit this web service and we'll spit out the answer for you so that you don't have to answer for you so that you don't have to actually do the computation well oh but the point is now it's not a sorry but is the point is now it's not a sorry but is that the valid or the end user is doing that the valid or the end user is doing is it like is there's a special operation type which is like speedx solution or it's like right so the point is like you were disempowering the end users if we're saying like now you're kind of like you're reliant on like whatever solver your validator happens to be willing or your validator happens to be willing or not willing to use but the flip side of it is like there's but the flip side of it is like there's 90 when i looked at this when we were 90 when I looked at this when we were working on this in the

00:48:00.000 --> 00:48:59.999 align:start position:0%
working on this in the early winter there were 89 000 and something assets on Stellar even if we broke it into 100 groups of 90 to standard jeff's 100 threshold we couldn't do all of that in the same way like we couldn't give everybody the same level of attention there's not enough time to do it well i there's not enough time to do it well i think you just have to price it properly right i mean that you know we could have right I mean that you know we could have you know a super linear you know we reserve fee for like putting your asset into a speed x or something right it could like increase with the number of assets and speed exits i think you know assets and speed exits I think you know i'd rather like take the actual costs we have and reflect those back onto users and say like this is what it's going to and say like this is what it's going to cost to network so like you have to be cost to network so like you have to be willing to pay for it rather than having validators make value judgments about like which assets are good and which are bad I'm sorry you're so willing to have that it would cost the issuer of the asset would be the one that would bear the cost of being listed into a speedx list not the cost but the reserve

00:49:00.000 --> 00:49:59.999 align:start position:0%
list not the cost but the reserve requirement the reserve requirement potentially and again I'm not saying that like you know i do think that there are kind of know I do think that there are kind of spam assets in their assets that everybody cares about but i think that the va that we should kind I think that the va that we should kind of instead of just magically decree the value of an asset we should have existing asset issuers say hey i actually value having a market between my asset and this other asset right and that's the sense in which maybe you could end up with multiple speed x's like maybe there's a weird like in-game currency market for like a whole bunch of and then there's like an actual real currency of like stable coins or something and you know maybe those two markets don't need to inter-operate or they only operate on the native asset or something and then the validators aren't don't we don't have to be in a position of saying don't have to be in a position of saying like actually we think like euros are more important than like game credits or whatever which like we might but like why should we be making that value decision

00:50:00.000 --> 00:50:59.999 align:start position:0%
decision so we could say like each speed x batch has like an id or each speed x batch has like an id or something and it's not the validators that choose what's in that it's the asset issuers can like propose to put their asset into a batch and then if you put asset into a batch and then if you put your asset into a batch then all the other asset issues were there like say yes or no or they have a like say yes or no or they have a vote or something and basically the asset issuers are the ones choosing who's in the batch and not the validators yes I mean that is one way to do it another way to do it is sort of like another way to do it is sort of like each person who joins the batch it gets like exponentially more expensive and you need an exponentially larger like reserve so it's like you know you can sort of out or maybe you know you can sort of out or maybe you can outbid whoever it's whoever has like the largest reserves who gets in or some combination of the above i feel some combination of the above I feel like we probably want some amount of input i mean what are the signals that input I mean what are the signals that are sort of like in some sense egalitarian at least kind of you know like a

00:51:00.000 --> 00:51:59.999 align:start position:0%
you know like a objectively egalitarian but like are potentially useful so one signal is like does an asset issuer value a market between his or her asset and some other asset and another signal is like what is my how much how many native assets do i have you know what do i meet a have you know what do I meet a high reserve requirement and so like if we could sort of factor and so like if we could sort of factor these two things in so the reserve requirement is an absolute thing and the whether one asset thinks another one is interesting is a relative thing I think you still need some kind of veto power from the people who are already there it's just so well that's what i mean that's the first one that's what I mean that's the first one that's the relative thing that I'm talking about I'm saying like what I mean maybe it's a video or maybe it's a preference i I'm going to avoid something that I I'm going to avoid something that tomer just also shared on slack which is a concern with like creating too much complexity around these around how these configurations work that make it really hard for people to interact with Stellar just because there's too many

00:52:00.000 --> 00:52:59.999 align:start position:0%
just because there's too many it's just like issuers don't have to do this kind of thing anywhere else adding a lot of complexity makes adding a lot of complexity makes Stellar just less appealing for use it's something i think that is worth it's something I think that is worth considering in this design yeah so i considering in this design yeah so I mean and part of the way we can get mean and part of the way we can get around that is by having like really sensible defaults right but i feel like we should right but I feel like we should we at least need some of these we need we at least need some of these we need to like work through some of these designs before we decide that they're like too comp complex or before we give up like this is just there's too much like I just don't want validators picking winners and losers you know if we can at all avoid it so we need to if we can at all avoid it so we need to either avoid that or convince ourselves that there's no way to avoid it and i just there's no way to avoid it and I just don't think we're quite there yet and like this maybe different related questions so like what was the reason to

00:53:00.000 --> 00:53:59.999 align:start position:0%
the reason to like if you had a limit a limit right so that's what you're like the only thing really there that you need for sure is the maximum number of assets involved in this fedex run so then what was what is was there any reason for not just using fees as a way reason for not just using fees as a way to force people to just like you know you basically only keep the top k top k assets right that are involving speed x and that is defined by fees the reason that doesn't work is that you can imagine that there are time like you can imagine for example like a us government bond take that it's like one of the most liquid markets for anything in the world probably like on the same par as like other at like other very ultra liquid things like usd euro but like those are like some ultra liquid things but like i want to focus

00:54:00.000 --> 00:54:59.999 align:start position:0%
liquid things but like I want to focus on the bonds because the prices don't change all the time like prices change but like if you look and then you look again one second later you might see the exact same prices in fact you're probably pretty likely to see the exact same prices in those cases there might be nobody who's willing to pay a fee to trade but there'd probably be an incredibly liquid liquidity pool that also would be willing to trade to help settle out all the other trades that people want to make that liquidity pool isn't bidding any fee so do you just say like oh sorry like so do you just say like oh sorry like we're not going to include the most liquid market in the world because nobody wants to trade this exact second that seems really perverse to me right i think what you want everybody what you want is for all the other assets to say hey i want people to be assets to say hey I want people to be able to like trade you know these treasuries or whatever from my asset because that's like it's a useful feature for users of my asset to have right so that that's why you need

00:55:00.000 --> 00:55:59.999 align:start position:0%
you need some amount of kind of you need some amount of kind of configuration you need some you need configuration you need some kind of input from the asset issuers right we should at least consider a design that has some amount of input from asset issuers i mean like i still don't understand I mean like I still don't understand like you know in your example john yes you have this asset that is very stable and so on but like even if that asset is included in a pool even if that asset is included in a pool if people don't make money of you know doing a trade against some other asset like if the if that trade is not that valuable like how is such pricing going to work no it is valuable it's just not valuable to the asset issuer right imagine suppose you know the fed issues a digital dollar on Stellar right i get it like it's more like I get it like it's more like what i was suggesting is that you like what I was suggesting is that you the way you pick the top 10 assets is by actually looking

00:56:00.000 --> 00:56:59.999 align:start position:0%
the top 10 assets is by actually looking at the trades that are happening across you know the network because you have to have this function that you know which top k top end transactions are you keeping for that speed x round and as part of that you can wait round and as part of that you can wait sorry is it for a round i thought this sorry is it for a round I thought this was a more coarse grained thing like we just kind of you know every once in a while we'll configure a you know speed x to have a different set of assets i mean yeah it a different set of assets I mean yeah it should be a wrong i mean it's there's should be a wrong I mean it's there's a level of granite granularity there i don't know like but you know i mean if don't know like but you know I mean if we are going to do it find granularity then we should do it through some kind of transaction as opposed to through like a protocol upgrade or whatever the upgrade part of the nomination message of value if it's per asset issuer it should be a yeah transaction and not an upgrade i guess i think doing it to find grain is a I think doing it to find grain is a little dangerous just because there's gonna be a lot of assets that are sporadically traded and so like

00:57:00.000 --> 00:57:59.999 align:start position:0%
are sporadically traded and so like if you try and like optimize like i don't know some max over the transaction set assets are gonna be going in and out of the pool a lot and that's hard to out of the pool a lot and that's hard to predict for users and so usually kind of gonna get a lot of like really failed of gonna get a lot of like really failed transactions which is a bad experience yeah the cap mentions that and i totally yeah the cap mentions that and I totally agree like i definitely wouldn't want a agree like I definitely wouldn't want a world where that set changes every ledger that sounds like really impossible to use and everybody will just be really frustrated and hate it well at this point we are out of time for today's meeting i guess just jeff for today's meeting I guess just jeff and john do you sort of have some input that allows you to go move forward i mean i know that we can bring forward I mean I know that we can bring this back to the mailing list too is there any like final question that's like what should happen what's the next step that we need to answer here are we ready to move you sort of have enough i think it's pretty clear that people I think it's pretty clear that people want us to ask other questions about what could be done like I have some pretty strong opinions about what like why it should be

00:58:00.000 --> 00:58:59.999 align:start position:0%
about what like why it should be the way i proposed but like I'm really the way I proposed but like I'm really happy to go and explore some other things and try to write up what they would be like and like what pitfalls we might encounter it'd probably be kind of fun honestly so i kind of know what i fun honestly so I kind of know what i need to do jeff you feel the same yeah i agree jeff you feel the same yeah I agree with that yeah well i mean i think maybe it's well I mean I think maybe it's like for me it's like that there are some questions here that I'm not sure we can answer without actually having like how do you actually produce the denomination value like if i don't have a clear idea of like how do we pick which transactions to be included you know like based on fees like it sounds like some of the properties you're looking for actually you're looking for a more balanced like composition as opposed to just high fees and I'm not sure are you talking about me or about david

00:59:00.000 --> 00:59:59.999 align:start position:0%
about me or about david no about you yeah john i I'm looking for whatever I I'm looking for whatever simple thing we can do that people can agree on like that's why I just gave it to the validators because i thought we'd be validators because I thought we'd be able to agree on that and they could agree and figure out what is good for the network that's what like when lee posted on the mailing list and about like other things we could do and my response was basically like you'd have to convince me that a heuristic would outperform the validators who care about stewarding the network assuming that we are actually restricting like a small number of speed x assets in a world like david's where we have multiple sets maybe and we're expanding the capacity by like breaking them up maybe it's a different trade-off but like if we're going to look at a but like if we're going to look at a single block you'd have to convince me that like the heuristic could outperform the validators who just want to do what's good for the network i mean the other question is would it I mean the other question is would it make sense to have two tiers like you you'd have like the core speedx assets and then other assets that can be traded for any of the 20 core speedx assets but for any of the 20 core speedx assets but it's not making a market between any

01:00:00.000 --> 01:00:59.999 align:start position:0%
but it's not making a market between any of the like a pair of non-core assets shmedex has assets shmedex and speedx sorry we've exhausted justin he's trying to kick us out and all right look to be continued [Laughter] thanks everybody yeah to be continued seeing a couple weeks and on the mailing list again everybody out there thanks for watching if you're interested join the Stellar dev mailing list to participate in the discussion as it unfolds
