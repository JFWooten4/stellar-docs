WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:59.999 align:start position:0%
so welcome to the stellar open protocol discussion in these discussions we discussion in these discussions we discuss and plan for discuss and plan for changes to upcoming versions of the changes to upcoming versions of the stellar protocol um right now we're stellar protocol um right now we're focused on project jump cannon which focused on project jump cannon which will bring smart contracts to stellar in will bring smart contracts to stellar in addition to changes to the stellar addition to changes to the stellar protocol it will also lead to the protocol it will also lead to the creation of a new smart contracts creation of a new smart contracts platform platform and all of the discussion that we're and all of the discussion that we're having about this is being tracked and having about this is being tracked and you can participate in it much of it and you can participate in it much of it is happening here on discord in the jump is happening here on discord in the jump cannon channel and the drum cannon dev cannon channel and the drum cannon dev channel there are also a series of core channel there are also a series of core advancement proposals or caps that advancement proposals or caps that relate to changes that would enable jump relate to changes that would enable jump cannon or the new smart contracts cannon or the new smart contracts platform platform caps 46 through 55 i believe at this caps 46 through 55 i believe at this point they're pretty modular so each one point they're pretty modular so each one sort of takes on an aspect of the sort of takes on an aspect of the changes that need to be made in order to changes that need to be made in order to bring smart contracts to stellar and we bring smart contracts to stellar and we are working through those modules bit by are working through those modules bit by bit and discussing sort of the segments bit and discussing sort of the segments necessary and the changes necessary to necessary and the changes necessary to allow those segments to actually come to allow those segments to actually come to life

00:01:00.000 --> 00:01:59.999 align:start position:0%
life at some point all of the work that we do at some point all of the work that we do will go through the normal process in will go through the normal process in other words caps are sort of uh other words caps are sort of uh put up in this github repository that's put up in this github repository that's linked to in the show notes they're linked to in the show notes they're discussed here they're discussed on a discussed here they're discussed on a mailing list and they're discussed in mailing list and they're discussed in discord and uh after they sort of discord and uh after they sort of reach a point where they are stable they reach a point where they are stable they move from being a draft into a formal move from being a draft into a formal acceptance period finally they're acceptance period finally they're accepted and implemented in a version of accepted and implemented in a version of the stellar protocol and before that the stellar protocol and before that version of the stellar protocol goes version of the stellar protocol goes live validators actually vote to accept live validators actually vote to accept it um now we are still fairly well we've it um now we are still fairly well we've actually made a lot of progress in the actually made a lot of progress in the in sort of the jump cannon trajectory in sort of the jump cannon trajectory but as of yet the caps that we have in but as of yet the caps that we have in front of us have not been accepted front of us have not been accepted there's still a lot of questions and there's still a lot of questions and today we will dig into some of those today we will dig into some of those questions questions um if you um if you who are listening actually have who are listening actually have questions you can leave them as text in questions you can leave them as text in the live chat channel i'll try to keep the live chat channel i'll try to keep an eye on that um an eye on that um we're certainly trying to move this we're certainly trying to move this discussion forward and have discussion forward and have the substantive issues um come to light

00:02:00.000 --> 00:02:59.999 align:start position:0%
the substantive issues um come to light so so you know we may not be able to answer you know we may not be able to answer all the live chat questions but we all the live chat questions but we definitely will later definitely will later if we can't answer them in the course of if we can't answer them in the course of this meeting this meeting so i think everyone is here and i think so i think everyone is here and i think we are ready to kick off we are ready to kick off um um today i know that today i know that um recently there was a new cap 55 um recently there was a new cap 55 fee model in smart contracts um i don't fee model in smart contracts um i don't know if it just hit the mailing list know if it just hit the mailing list yesterday there were a few comments that yesterday there were a few comments that came in i guess i'm going to start by came in i guess i'm going to start by asking you asking you uh nicola if we're ready to discuss that uh nicola if we're ready to discuss that if that's where we should start maybe yeah like we can maybe um maybe um [Music] [Music] like just go over like a quick overview like just go over like a quick overview of like what's going on in that cap and of like what's going on in that cap and then then um um you know like we don't have to go in you know like we don't have to go in details basically so i'm not sure like details basically so i'm not sure like we need to have like a lot of uh we need to have like a lot of uh of a pre-reading basically as part of of a pre-reading basically as part of this

00:03:00.000 --> 00:03:59.999 align:start position:0%
this is that is that good use of time of people yeah i think good use of time of people yeah i think that sounds good also nico if you can that sounds good also nico if you can you know obviously a lot of these things you know obviously a lot of these things are kind of like normal quote unquote in are kind of like normal quote unquote in the world of crypto but uh some of these the world of crypto but uh some of these are are a bit more contentious so i would like a bit more contentious so i would like emphasize specifically like the emphasize specifically like the contentious bits so that we can have a contentious bits so that we can have a good old-fashioned argument all right let's see uh and uh yeah i mean so do we want to start with this uh cap so do we want to start with this uh cap or i think there were there was also or i think there were there was also like the events one that cida uh like the events one that cida uh opened that is maybe a little more scope opened that is maybe a little more scope i don't know i don't know yeah i argue let's start with the yeah i argue let's start with the siddharth one because it's less uh siddharth one because it's less uh contentious and we'll probably be contentious and we'll probably be arguing this okay great so we'll start arguing this okay great so we'll start there we'll end up at cat 55 uh sit down there we'll end up at cat 55 uh sit down do you want to yeah do you want to yeah i don't know if i don't know if everyone had time to read the cap everyone had time to read the cap document i actually made a fix of this document i actually made a fix of this morning

00:04:00.000 --> 00:04:59.999 align:start position:0%
morning but i can give a quick uh overview of it but i can give a quick uh overview of it and and you can uh you can uh we can discuss after that we can discuss after that so i made uh i added this change on so i made uh i added this change on to cap 51 which is the host functions to cap 51 which is the host functions cap cap i just added uh i just added uh the ability for contracts to log the ability for contracts to log data so i added a contract logs back to data so i added a contract logs back to the transaction meta the transaction meta um and as a part of this change i we um and as a part of this change i we also moved the transaction result into also moved the transaction result into the meta as well the meta as well both contracts so both contract logs and both contracts so both contract logs and transact transaction results are hashed transact transaction results are hashed and a hash of these hashes are stored in and a hash of these hashes are stored in the transaction result pair which is uh the transaction result pair which is uh this is how you would cryptographically this is how you would cryptographically verify them verify them and one change i haven't made to the and one change i haven't made to the document yet but we talked about document yet but we talked about yesterday was that uh we're gonna add yesterday was that uh we're gonna add another another contract log type uh where the logs are contract log type uh where the logs are only emitted if there's an error only emitted if there's an error um so that's a very high level um so that's a very high level overview are there any questions

00:05:00.000 --> 00:05:59.999 align:start position:0%
i guess like those logs they are like uh logs that are like the logs that are like the equivalent to equivalent to events in ethereum uh yeah so they well yeah so they well so the way it would work is so the way it would work is uh uh you know that the contracts allow you know that the contracts allow whatever they want since it gets sent to whatever they want since it gets sent to core core or write some transaction meta and or write some transaction meta and horizon can serve them up horizon can serve them up in any way you want so i was i would in any way you want so i was i would imagine that you know if you want to imagine that you know if you want to listen to a specific event listen to a specific event uh horizon would provide that ability uh horizon would provide that ability allowing you to you know write allowing you to you know write applications that applications that would hook on to specific events so one thing that i want to point out here is that point out here is that it basically means that in order to sift it basically means that in order to sift through through um um data coming in from uh horizon as an data coming in from uh horizon as an ingestor you need to basically ingestor you need to basically read everything

00:06:00.000 --> 00:06:59.999 align:start position:0%
read everything which may become a lot which may become a lot as the network grows in capacity um as the network grows in capacity um ethereum has this concept of this uh ethereum has this concept of this uh bloom filter uh that's included in uh bloom filter uh that's included in every ledger header so that you can every ledger header so that you can actually actually uh uh get a like a strong indicator whether or get a like a strong indicator whether or not the smart contract that you're not the smart contract that you're interested in or the account that interested in or the account that you're interested in you're interested in is actually included uh or has emitted is actually included uh or has emitted events in that specific block events in that specific block um should we consider doing something um should we consider doing something similar uh yeah i don't think uh i can't think off top of my head why we wouldn't do um optimize like that that's that area i'm sorry i can look into that i got i i'm sorry i can look into that i got i don't think i don't see i don't think don't think i don't see i don't think i see anything uh wrong with that i see anything uh wrong with that well actually i think it's kind of uh well actually i think it's kind of uh maybe like maybe like premature optimization type of situation

00:07:00.000 --> 00:07:59.999 align:start position:0%
premature optimization type of situation like there are probably better ways to like there are probably better ways to do it than doing this kind of arbitrary do it than doing this kind of arbitrary broom filter thing uh broom filter thing uh like uh like you know i can imagine for example like you know i can imagine for example like we have just made a stream uh you could we have just made a stream uh you could have horizon have horizon telco which telco which filters it wants to apply instead of filters it wants to apply instead of kind of doing it after the fact kind of doing it after the fact and then the mirror would be a subset of and then the mirror would be a subset of the meta like maybe like you're not the meta like maybe like you're not interested in interested in ledger changes let's say ledger changes let's say maybe you're not interested in classic maybe you're not interested in classic transactions you know like all those transactions you know like all those things things well you're assuming a horizon well you're assuming a horizon here and i think that's like part well here and i think that's like part well there's always a consumer right of but if you want something that's like an application specific consumer application specific consumer um which you do see in other ecosystems um which you do see in other ecosystems quite a bit quite a bit um you know if i'm developing a dap um you know if i'm developing a dap and i want to have a

00:08:00.000 --> 00:08:59.999 align:start position:0%
and i want to have a you know like a stream coming in of my you know like a stream coming in of my specific information why should i of my specific information why should i run a full-blown horizon run a full-blown horizon rather than some sort of a light client rather than some sort of a light client that could just that could just uh you know share uh you know share logs that are specifically relevant to logs that are specifically relevant to me and that's again like a subscriber i don't see why this is like part of i don't see why this is like part of this gap this gap well i'm not saying it's well i'm not saying it's part of this cap but i am saying like is part of this cap but i am saying like is there a place in the protocol is there a place in the protocol uh to optimize for these use cases uh to optimize for these use cases because we actually want more people because we actually want more people to run to run nodes nodes and and uh what we're doing here right now is uh what we're doing here right now is that we're like really tying them down that we're like really tying them down to like the horizon model to like the horizon model which is consume everything which is consume everything in just everything in just everything no no like horizon doesn't force you into like horizon doesn't force you into uh uh consuming everything consuming everything you're getting the entire meta

00:09:00.000 --> 00:09:59.999 align:start position:0%
you're getting the entire meta and then you filter it yes uh like is and then you filter it yes uh like is the amount of meta being produced the is the amount of meta being produced going to be a bottleneck in the you know going to be a bottleneck in the you know even in the middle even in the middle you know you know medium medium term i term i don't think so don't think so like you know xdr is fairly efficient like i would like to see the actual performance problems before performance problems before picking arbitrary type of picking arbitrary type of filtering technology filtering technology because i don't know what the use cases because i don't know what the use cases are like you're saying they are events are like you're saying they are events yeah sure then yeah sure then you just keep advance it's a very small you just keep advance it's a very small subset actually of the media subset actually of the media stream is anything that we're adding here in this cap prevent us from adding a bloom this cap prevent us from adding a bloom filter or other sort of strategies in filter or other sort of strategies in the future i don't think so but the future i don't think so but yeah you can do any kind of filtering i yeah you can do any kind of filtering i mean mean i think the i think the the place where i can see having an the place where i can see having an actual bottleneck in the future is the

00:10:00.000 --> 00:10:59.999 align:start position:0%
actual bottleneck in the future is the actual size of the actual size of the meta may get too large for like uh if meta may get too large for like uh if you want to run a light uh lighter node but then we are getting into custom logic custom logic in core to kind of in core to kind of you know filter that somehow you know filter that somehow and i think the best way to do it is and i think the best way to do it is actually like when you're producing it actually like when you're producing it instead of trying to do it after the instead of trying to do it after the fact like with like uh fact like with like uh like with the bloom filters something that i don't see here when it comes to filtering is comes to filtering is any way to filter beyond the contract so any way to filter beyond the contract so like like presumably the contract being out of presumably the contract being out of filter up by the contract filter up by the contract um um is there because that would probably be is there because that would probably be in the transaction matter in the transaction matter but but um um if a contract wants to if a contract wants to emit emit a whole lot of different logs

00:11:00.000 --> 00:11:59.999 align:start position:0%
a whole lot of different logs how would an application filter on those how would an application filter on those specifically or is that just too specifically or is that just too granular to micro well at the moment uh you know the you know the body is an sc val so if you wanted to do body is an sc val so if you wanted to do that that you would add the filtering in there you would add the filtering in there um but um but you know i think we would discuss this you know i think we would discuss this okay like maybe that's not reasonable uh okay like maybe that's not reasonable uh we should add a higher level filters we should add a higher level filters above the sc bell above the sc bell something we can consider something we can consider yeah like that right now this structure yeah like that right now this structure would make sense here yeah like would make sense here yeah like originally i i thought we would do originally i i thought we would do something like right now you have this something like right now you have this uh uh block type right uh system or contract block type right uh system or contract info and basically if it's a info and basically if it's a i mean actually for both of them you i mean actually for both of them you probably want to have like an actual probably want to have like an actual event name right like which is like a event name right like which is like a short symbol of source short symbol of source right

00:12:00.000 --> 00:12:59.999 align:start position:0%
yeah i think that makes sense i would honestly look at sort of what the subscription patterns sort of what the subscription patterns that you see in other smart contracting that you see in other smart contracting platforms are because they have platforms are because they have explored this space fairly explored this space fairly extensively and i think it's what a lot extensively and i think it's what a lot of the sdks really lean on like if of the sdks really lean on like if you're writing a dapp it's fairly common you're writing a dapp it's fairly common for it to latch onto a bunch of for it to latch onto a bunch of subscriptions so like however subscriptions so like however they're normally doing it we kind of they're normally doing it we kind of want to support those patterns is there more anyone else have thoughts questions suggestions is it sort of questions suggestions is it sort of clear what the next move is for you here

00:13:00.000 --> 00:13:59.999 align:start position:0%
clear what the next move is for you here siddharth you move on to catholic actually like there is uh something yeah actually like there is uh something yeah that i just thought about that i think that i just thought about that i think you know from what uh you know from what uh i think graydon was i think graydon was asking in terms of use cases like asking in terms of use cases like like are there expectations for example that are there expectations for example that uh and that's related to this filtering question um question um that you want to have proofs of events that do not happen proofs of events that do not happen so like positive proofs are easy like uh so like positive proofs are easy like uh like with the proposal you like with the proposal you have like uh you know basically like uh have like uh you know basically like uh you can prove that a given ledger had a you can prove that a given ledger had a specific event inside a space you know specific event inside a space you know from a generated by a specific contract from a generated by a specific contract what if you want to prove the negative what if you want to prove the negative that is

00:14:00.000 --> 00:14:59.999 align:start position:0%
that a specific event yeah was not emitted in a ledger emitted in a ledger is that like the type of things that is that like the type of things that people people try to do in other systems so yeah that's a question for yeah to look into the look into the what happened what happened the use cases yeah 55. let's move on to it let's move on to it all right all right yeah yeah so 55 is uh basically like uh like trying to layer like trying to layer fees on top of the various uh fees on top of the various uh like like resource uh resource uh metering uh that uh uh metering uh that uh started to get introduced in the system started to get introduced in the system so it's kind of a problem is it's a so it's kind of a problem is it's a little bit ahead of that because we little bit ahead of that because we didn't actually

00:15:00.000 --> 00:15:59.999 align:start position:0%
didn't actually finish all this uh like i think we have finish all this uh like i think we have a the beginning of like gas metering for a the beginning of like gas metering for example um example um in cap 46 in cap 46 but there are like other things that are but there are like other things that are not covered yet not covered yet um um so yeah this is uh so the test so yeah this is uh so the test disclaimer this gap has a bunch of uh disclaimer this gap has a bunch of uh open-ended open-ended things things um let's see and um yeah so like they um let's see and um yeah so like they are are where the cap uh where the cap uh is uh is uh covered there are like several aspects covered there are like several aspects kind of uh kind of uh maybe like more important to discuss uh maybe like more important to discuss uh i think um i think um there's the first one around there's the first one around the uh the uh classification of resources and having classification of resources and having market dynamics uh based on those market dynamics uh based on those resource types so this is an area where resource types so this is an area where um um if you look at uh other blockchains it's if you look at uh other blockchains it's actually a mix of things

00:16:00.000 --> 00:16:59.999 align:start position:0%
actually a mix of things like some systems like some systems um like historically started with just um like historically started with just like ethereum um just like gas as being like ethereum um just like gas as being the uh the uh yes i i'm also a gas yes i i'm also a gas in the context in this context meaning in the context in this context meaning um um the the kind of this uh kind of this uh metric right that allows to metric right that allows to to kind of uh to kind of uh count the cost of a um to execute a count the cost of a um to execute a transaction and cost here is kind of a transaction and cost here is kind of a pretty loose in terms of pretty loose in terms of definition um definition um uh uh like mostly computation but when you do like mostly computation but when you do like when you load like a like when you load like a ledger entry uh like when you like a ledger entry uh like when you access ledger you also pay for gas um and then yeah like yeah and then so um and then yeah like yeah and then so you have like gas cost which is you have like gas cost which is uh this aggregate metric uh this aggregate metric basically of multiple resource types and

00:17:00.000 --> 00:17:59.999 align:start position:0%
basically of multiple resource types and then uh more recently in ethereum there then uh more recently in ethereum there have been discussions around uh have been discussions around uh other types of resources that are kind other types of resources that are kind of interesting of interesting um such as uh bandwidth um such as uh bandwidth uh and any other like basically uh and any other like basically you have a kind of a you have a kind of a funny funny crossroad there that is crossroad there that is do i want to do i want to have uh a market for have uh a market for uh uh for each of those resources or do i want for each of those resources or do i want to kind of generate like a composite to kind of generate like a composite market market for those so like the you have like uh i think in polkadot what they do is uh they put a polkadot what they do is uh they put a the aggregation with utilities with a the aggregation with utilities with a polynomial uh function so basically take polynomial uh function so basically take all those resource types and then you all those resource types and then you assign them assign them um um a weight actually it's not even i think a weight actually it's not even i think they are linear it's a linear they are linear it's a linear thing

00:18:00.000 --> 00:18:59.999 align:start position:0%
thing and then yeah you combine all those and then yeah you combine all those things and you get with your synthetic things and you get with your synthetic i don't remember how they call it weight i don't remember how they call it weight i think in in over there but like um yeah like that's over there but like um yeah like that's a way to kind of compute this that's a way to kind of compute this aggregate gas aggregate gas so the challenge um so to talking about so the challenge um so to talking about challenges that comes with those challenges that comes with those aggregate uh models is that it's aggregate uh models is that it's actually very hard to discover price of actually very hard to discover price of things things like uh an example is uh like uh an example is uh um um if you take a if you take a transaction that does a lot of i o and transaction that does a lot of i o and very little compute very little compute that is competing with a transaction that is competing with a transaction that does very little i o but a lot of that does very little i o but a lot of compute compute like like uh uh with those aggregate functions uh with those aggregate functions uh if try to pay if try to pay like 10 times more for example bid more

00:19:00.000 --> 00:19:59.999 align:start position:0%
like 10 times more for example bid more right for right for one transaction one transaction um you don't know if you're signaling that you're that your i o is what you want you're that your i o is what you want to prioritize or if it's your compute to prioritize or if it's your compute that you want to prioritize that you want to prioritize um um so so yeah so it basically causes the yeah so it basically causes the overall overall prices to have like this uncertainty in prices to have like this uncertainty in terms of like what should i bid so that's kind of one of the problems with those kind of the problems with those kind of aggregate aggregate metrics um so with that said uh with metrics um so with that said uh with john cannon like one of the things that john cannon like one of the things that we are doing is uh we have a very uh we are doing is uh we have a very uh clean uh separation between the clean uh separation between the different resource types different resource types so io for example so io for example when we read or write the ledger those when we read or write the ledger those are done are done basically outside of the basically outside of the main main execution like you can think of before applying a transaction before

00:20:00.000 --> 00:20:59.999 align:start position:0%
before applying a transaction before executing a contract executing a contract we load all the ledger entries that this we load all the ledger entries that this contract needs and then contract needs and then it does its thing and then at the end uh it does its thing and then at the end uh it produces potentially uh side effects it produces potentially uh side effects uh that will be applied uh that will be applied as like a post step as like a post step that's kind of a logically the way to we that's kind of a logically the way to we can you can think about this can you can think about this and um the opportunity here for us is and um the opportunity here for us is that because we have those uh that because we have those uh kind of completely separate kind of completely separate um um we can we can actually dis um actually dis um and we also do it because of and we also do it because of performance reasons uh performance reasons uh for parallelism but like because of that for parallelism but like because of that we can um we can um um we can actually express those markets uh we can actually express those markets uh like uh separately and we can therefore like uh separately and we can therefore i think um i think um have like cheaper have like cheaper fees overall because you can price fees overall because you can price things uh properly so you don't have to things uh properly so you don't have to do like do like to kind of articulate inflate for

00:21:00.000 --> 00:21:59.999 align:start position:0%
to kind of articulate inflate for example inflate the price of example inflate the price of reading data from the ledger because of reading data from the ledger because compute happens to be expensive uh which compute happens to be expensive uh which kind of kind of would happen with the aggregate model would happen with the aggregate model so so in the proposal what i'm in the proposal what i'm doing is actually doing is actually i have like three categories three i have like three categories three really really brackets for fees brackets for fees so one is for so one is for gas which is the compute time exactly gas which is the compute time exactly you can think of it as execution time in you can think of it as execution time in our model really because like i said in our model really because like i said earlier we have a earlier we have a full separation between i o and uh full separation between i o and uh and execution and execution uh so this one you can uh so this one you can bid bid [Music] [Music] second second market that i market that i have in the proposal is for reading and have in the proposal is for reading and writing to the ledger so here there is writing to the ledger so here there is actually a competition for actually a competition for uh there's like there are so many

00:22:00.000 --> 00:22:59.999 align:start position:0%
uh there's like there are so many uh there's like a you have like uh there's like a you have like constraints right in terms of a number constraints right in terms of a number like the bandwidth to the disk uh like the bandwidth to the disk uh subsystem both in reason rights subsystem both in reason rights um so um because of that you have to um so um because of that you have to have like have like a market for that a market for that and and it is separate right now um it is separate right now um and it is separate also because there is and it is separate also because there is a a interesting fee model for rights that interesting fee model for rights that i'm going to talk about uh later i'm going to talk about uh later um let's see and the third category um um let's see and the third category um is actually something that is not a is actually something that is not a market it's not really a market there market it's not really a market there are dynamic fees are dynamic fees for what i would consider like commodity for what i would consider like commodity on the network so things like on the network so things like um um like uh like uh producing meta or producing meta or data that ends up being stored in data that ends up being stored in archives archives those do not those do not there's no reason to have like really there's no reason to have like really competition between uh transactions uh

00:23:00.000 --> 00:23:59.999 align:start position:0%
competition between uh transactions uh instead we have like limits per instead we have like limits per transaction like basically we say transaction like basically we say you can only produce you can only produce i don't know like a 500k or something of meta right for a transaction and then transaction and then that's your limit and then two that's your limit and then two transactions are actually not competing transactions are actually not competing uh uh you know against each other so there is you know against each other so there is no no need to uh need to uh you cannot have a market dynamics there you cannot have a market dynamics there so so uh there are actually a few of those um uh there are actually a few of those um of those resource types and because of those resource types and because there are there is no market you can there are there is no market you can actually aggregate them so they end up actually aggregate them so they end up in one big bucket of like like deterministic fees basically based on the current fees basically based on the current state of the ledger plus plus yeah like the actual transaction um yeah like the actual transaction um so those are like the three three categories that we have in this proposal

00:24:00.000 --> 00:24:59.999 align:start position:0%
proposal any question at this point on this i've been going back and forth actually on this uh like a on this uh like a should we or not separate should we or not separate piece we could go with one like i said one market but i think uh it pushes price market but i think uh it pushes price quite a bit too much quite a bit too much for like cheap cheaper for like cheap cheaper whichever resource will be cheaper which is hard to predict do we anticipate that this will be do we anticipate that this will be difficult for users to reason about to difficult for users to reason about to like understand these different types of like understand these different types of fees and to think about how to set them fees and to think about how to set them so so yes and no i think that's actually one yes and no i think that's actually one of the things that's kind of interesting of the things that's kind of interesting is that when um we have uh already in the system a strong dependency on a pre-flight

00:25:00.000 --> 00:25:59.999 align:start position:0%
strong dependency on a pre-flight mechanism so like before submitting mechanism so like before submitting most transactions to the network uh like most transactions to the network uh like they will have to go through a they will have to go through a pre-flight endpoint pre-flight endpoint the pre-flight is the the pre-flight is the thing that basically will um allow the thing that basically will um allow people to people to compute compute gas for example to estimate gas for gas for example to estimate gas for transaction for transaction uh in addition to that uh in addition to that um let's see uh in addition to that yeah we have um have um uh like i was saying like uh certain uh like i was saying like uh certain fees that are like that more like fees that are like that more like dynamic because they are based on the uh dynamic because they are based on the uh current ledger uh like for example like current ledger uh like for example like a bunch of those things that i was a bunch of those things that i was saying are saying are like the price of storage in archive like the price of storage in archive this is uh this is uh voted uh voted uh by the by the or determined by the validators or determined by the validators so at before submitting a transaction so at before submitting a transaction [Music] [Music] you have to know basically what those you have to know basically what those parameters are

00:26:00.000 --> 00:26:59.999 align:start position:0%
parameters are um um and uh yeah so as part of the pre-flight and uh yeah so as part of the pre-flight endpoint you basically get a endpoint you basically get a an estimate for an estimate for your the minimum fee for your the minimum fee for those categories for those categories well in the case of the non-market-based resources the minimum fee is resources the minimum fee is basically equal to your basically equal to your or very likely to be equal to what or very likely to be equal to what you need you need in the case of um well you do have in the case of um well you do have markets uh it's more like today where markets uh it's more like today where you have to decide how much you have to decide how much do you want to over bid based on that do you want to over bid based on that because the minimum fee doesn't because the minimum fee doesn't necessarily translate to necessarily translate to uh uh to what the market is willing to pay to what the market is willing to pay so you have to look more at historical so you have to look more at historical data data but but this is like something we can uh this is like something we can uh yeah that uh that like yeah that uh that like endpoint scan like a horizon can uh

00:27:00.000 --> 00:27:59.999 align:start position:0%
endpoint scan like a horizon can uh can expose right um can uh can expose right um and having yeah having them tracked as and having yeah having them tracked as separate resources in terms of separate resources in terms of historical price historical price uh allows you have actually something a uh allows you have actually something a little little more stable i would imagine than more stable i would imagine than if it was like an aggregate i think the yeah the complexity from multiple markets uh comes from um multiple markets uh comes from um i mean i mean one of the implications is actually when one of the implications is actually when we we construct one and say we validators construct one and say we validators construct construct a transaction set a transaction set it's going to be a kind of a it's going to be a kind of a multi-dimensional nexa problem which is not great but that's the but that algorithm would not be part of the protocol it's more not be part of the protocol it's more like like it's uh

00:28:00.000 --> 00:28:59.999 align:start position:0%
it's uh if you have like five seconds to produce if you have like five seconds to produce a block here a block here that's uh there's so much compute you that's uh there's so much compute you can span in assembling the perfect can span in assembling the perfect transaction set yeah to answer original question justin at the end of the day uh the you know at the end of the day uh the you know the wallets should have an easy way to the wallets should have an easy way to present an uh like an estimated cost present an uh like an estimated cost in in uh an xlm currency that they can uh an xlm currency that they can understand understand and they can tell the user hey like and they can tell the user hey like um you know this is how much more um you know this is how much more you can uh you can you can uh you can propose for that like they don't need to propose for that like they don't need to actually understand the mechanics actually understand the mechanics of how this works yeah it's true that of how this works yeah it's true that when you over beat right like you're when you over beat right like you're doing for example you say i want to doing for example you say i want to spend like 10 more spend like 10 more than whatever happened in last few than whatever happened in last few lectures lectures that 10 percent you can put it that 10 percent you can put it i mean i imagine pretty safely across i mean i imagine pretty safely across like those different like those different resource types like the ones with

00:29:00.000 --> 00:29:59.999 align:start position:0%
resource types like the ones with markets markets uh because the assumption there is like uh because the assumption there is like the they are priced the they are priced accurately but i imagine that more yeah if you want to really save to really save like a it's hard to predict but like uh like a it's hard to predict but like uh like if there are like some of those like if there are like some of those like a gas for example becomes very like a gas for example becomes very expensive expensive um um yeah you don't like maybe you don't want yeah you don't like maybe you don't want to be to be as aggressive on as aggressive on the other resource types um can i jump in with a couple comments yeah um yeah um so i guess so um so i guess so um one it's um one it's um uh uh i guess high level it's not clearly what i guess high level it's not clearly what this adds over this adds over uh for having like a multi-dimensional uh for having like a multi-dimensional optimization problem over the optimization problem over the one-dimensional one um and the reason is

00:30:00.000 --> 00:30:59.999 align:start position:0%
one-dimensional one um and the reason is that uh sorry i haven't thought about that uh sorry i haven't thought about this all that much um but the reason is this all that much um but the reason is that like that like when when at least um in the current execution at least um in the current execution model sort of model sort of everything like everything executes um everything like everything executes um everything in one lane is going to everything in one lane is going to execute sequentially right and so the execute sequentially right and so the main like main like resource that's truly limited in resource that's truly limited in like a block is time right and um like a block is time right and um it's it's it like unless there's some sort of it like unless there's some sort of weird weird um interleaving going on between like um interleaving going on between like transaction executions um transaction executions um that's sort of the one-dimensional that's sort of the one-dimensional resource that we have to optimize anyway resource that we have to optimize anyway and so it's not clear to me why um and so it's not clear to me why um like like your example of like a transaction that your example of like a transaction that does lots of i o versus one that does does lots of i o versus one that does lots of compute well um both of them are lots of compute well um both of them are going to take a lot of time if they're going to take a lot of time if they're using a lot of one resource and so it's using a lot of one resource and so it's not clear to me that um not clear to me that um uh uh at least in the current execution setup at least in the current execution setup we have we have um um that it's uh we gain by sort of that it's uh we gain by sort of allocating some allocating some um i don't know

00:31:00.000 --> 00:31:59.999 align:start position:0%
um i don't know resource to like i o versus some to resource to like i o versus some to compute as opposed to just like looking compute as opposed to just like looking at the whole picture of like the total at the whole picture of like the total end-to-end time of the transaction end-to-end time of the transaction um that said it does seem like um that said it does seem like uh we it'd be good to like have some uh we it'd be good to like have some kind of like price discovery kind of like price discovery mechanism um for different resources and mechanism um for different resources and um certainly like you want like an um certainly like you want like an overall limit perhaps on like the total overall limit perhaps on like the total number of ledger entries um number of ledger entries um and so and so um i know i don't think um i know i don't think um sort of thinking off the top my head um sort of thinking off the top my head i don't think it's incompatible to have i don't think it's incompatible to have like a one-dimensional um like a one-dimensional um like like gas market and then like sort of price gas market and then like sort of price markets on each resource in the sense of markets on each resource in the sense of um um transactions could bid like transactions could bid like you know for the amount of resources you know for the amount of resources they want to use and like the fee per they want to use and like the fee per resource um resource um and then you do some like filtering step and then you do some like filtering step um but that's sort of thinking um um but that's sort of thinking um very much off the top my head very much off the top my head um i don't think we necessarily i guess um i don't think we necessarily i guess high level i don't think we necessarily high level i don't think we necessarily have to go to the full multi-dimensional

00:32:00.000 --> 00:32:59.999 align:start position:0%
have to go to the full multi-dimensional operation problem that's but yeah that's possible like uh it just looked like uh it just looked like uh from from historical historical kind of uh experience right like a like kind of uh experience right like a like i o is a huge problem i o is a huge problem and um and um trying to model that as time trying to model that as time is actually making it's actually a is actually making it's actually a disservice in a way to the disservice in a way to the network because network because you have like you have like very expensive very expensive uh uh from uh from uh like this point of view right like like this point of view right like something that's going to suck your something that's going to suck your disk resources uh that now stole disk resources uh that now stole all your calls right on in a multi you all your calls right on in a multi you know parallel uh know parallel uh execution model execution model um like store as in you know because um like store as in you know because like i said we do all i o like i said we do all i o early on and if you're actually maxing early on and if you're actually maxing out out uh your uh your drive then drive then you're just stuck

00:33:00.000 --> 00:33:59.999 align:start position:0%
uh right i mean it makes sense to have um um perhaps a limit on perhaps a limit on uh uh overall io i guess overall io i guess and then there's yeah the other aspect and then there's yeah the other aspect uh actually maybe if uh actually maybe if we can you know like uh we can you know like uh i don't think we're going to i don't think we're going to necessarily like close on this necessarily like close on this multi-dimensional thing you know now but multi-dimensional thing you know now but like there's the other aspect of yeah like there's the other aspect of yeah ledger size and rights uh that is ledger size and rights uh that is actually another kind of key thing in actually another kind of key thing in there that there that i guess makes i guess makes uh uh io a little more special also io a little more special also nico just to go back to nico just to go back to jeff's point like i understand that to jeff's point like i understand that why i o needs to be you know priced why i o needs to be you know priced significantly higher significantly higher than uh you know the compute operations than uh you know the compute operations but i don't necessarily understand why but i don't necessarily understand why it needs to have like its own market so the pricing right that you have is the minimum price it's not

00:34:00.000 --> 00:34:59.999 align:start position:0%
is the minimum price it's not the market price like when you uh market prices is uh market prices is uh like like in the ideal in the ideal like what is describing the cap is like what is describing the cap is trying to be closer to like the ideal trying to be closer to like the ideal situation where situation where um you can actually construct um you can actually construct a transaction set that's going to a transaction set that's going to basically be like right at the edge in basically be like right at the edge in terms of the capacity that you have on terms of the capacity that you have on your actual you know underlying hardware your actual you know underlying hardware so like cpu so like cpu and io and io for disk if we lose that visibility then you may actually allocate you may actually allocate too many transactions to compute when too many transactions to compute when then uh like then uh like uh you know you uh you know you don't have like basically like the you don't have like basically like the the kind of natural way of uh of having a

00:35:00.000 --> 00:35:59.999 align:start position:0%
kind of natural way of uh of having a um um a transaction compete against other a transaction compete against other transactions that are paying for transactions that are paying for expensive stuff expensive stuff that's kind of what i'm getting to that's kind of what i'm getting to like uh like if you have like um like uh like if you have like um what was it like a good example would be what was it like a good example would be like uh like uh um yeah i don't know which one of those resources would be more expensive but resources would be more expensive but they are not going to be in the same they are not going to be in the same order of magnitude let's say like a order of magnitude let's say like a compute is the one more expensive at a compute is the one more expensive at a given time given time so so you have to pay like 10 times more right you have to pay like 10 times more right or 100 times more than the minimum or 100 times more than the minimum fee for compute fee for compute to get into the ledger to get into the ledger but your but your your storage price your storage price is also kind of expensive and by bidding is also kind of expensive and by bidding a hundred times you also bid a hundred a hundred times you also bid a hundred times on times on storage storage and you're basically overshooting quite

00:36:00.000 --> 00:36:59.999 align:start position:0%
and you're basically overshooting quite a bit a bit compared to the ideal um compared to the ideal um model model yeah i think the general point yeah i think the general point here is just that you cannot that in here is just that you cannot that in reality reality uh it's not the case that there's uh it's not the case that there's just there's just time when uh a transaction is executing time when uh a transaction is executing um there are two different um there are two different resources and there are different resources and there are different contention patterns on them and you contention patterns on them and you can't trade one for the other the can't trade one for the other the the system does not actually trade one the system does not actually trade one for the other like for the other like if i for example submit uh you know if i for example submit uh you know a hundred transactions every one of a hundred transactions every one of which is doing incredibly cpu and which is doing incredibly cpu and expensive stuff expensive stuff um that doesn't saturate the i o um that doesn't saturate the i o system and there's still no system and there's still no contention on the i o system uh whereas contention on the i o system uh whereas if i submit a 100 transactions that are if i submit a 100 transactions that are just doing i o and they're doing no cpu just doing i o and they're doing no cpu that doesn't saturate the cpu so they that doesn't saturate the cpu so they are really two separate resources and are really two separate resources and the point where one of them gets a limit the point where one of them gets a limit uh and can no longer do uh and can no longer do transaction processing it transaction processing it doesn't doesn't represent a limit on the other and vice represent a limit on the other and vice versa and so you you can't trade

00:37:00.000 --> 00:37:59.999 align:start position:0%
versa and so you you can't trade between the two of them uh from a between the two of them uh from a market perspective sorry i'm not quite following something didn't we say earlier that we didn't we say earlier that we were going to do like all of the sort of were going to do like all of the sort of disk reads first and then do the disk reads first and then do the executions right so that if we have a executions right so that if we have a lot of disk reads then we have less time lot of disk reads then we have less time for execution for execution and so the vice versa and so the vice versa i sort of understand that there's not i sort of understand that there's not they're not like directly tradable but they're not like directly tradable but they seem they seem correlated or anti-correlated correlated or anti-correlated well they're they're different well they're they're different devices so like right i'm using the disk devices so like right i'm using the disk and then i'm doing the cpu right i'm not and then i'm doing the cpu right i'm not using it at the same time using it at the same time i mean like sure there's different i mean like sure there's different offers and things but um offers and things but um yeah sure but the execution yeah sure but the execution characteristics of each of them are characteristics of each of them are different so you use everyone uses different so you use everyone uses the same desk and then everyone sort of the same desk and then everyone sort of farms out to multiple threats right i feel like we're talking past each

00:38:00.000 --> 00:38:59.999 align:start position:0%
i feel like we're talking past each other i mean yes one goes in order of other i mean yes one goes in order of the other the two of them do get added the other the two of them do get added together together in order to represent the total time in order to represent the total time but you can't trade time on one of them but you can't trade time on one of them for time on the other that's what i'm for time on the other that's what i'm saying i think i'm not quite following but that's okay nico are there any other networks and fee systems that uh networks and fee systems that uh introduce a split introduce a split or that work similarly those are like or that work similarly those are like the two the two like the yeah execution time and uh like the yeah execution time and uh like compute right and uh and disc are like compute right and uh and disc are like the two big things that i isolated like the two big things that i isolated like the right side like the right side i figured it would probably i figured it would probably is probably not needed is probably not needed so i kind of put a flat fee for the so i kind of put a flat fee for the other ones other ones like basically like uh um like basically like uh um in a proposal i'm basically saying like

00:39:00.000 --> 00:39:59.999 align:start position:0%
in a proposal i'm basically saying like we're okay with you know if you want to we're okay with you know if you want to have like have like something that uh something that uh like if you have a transaction that is like if you have a transaction that is very important that happens to emit a very important that happens to emit a lot of miller for example um lot of miller for example um but you have to get just over a bit like but you have to get just over a bit like crazy on your compute even though you're crazy on your compute even though you're not really that's not what it's about not really that's not what it's about you have to find a way to get it you have to find a way to get it prioritized um let's see are we talking about this okay like i think i kind of wanted to talk about it think i kind of wanted to talk about it here is in your proposal you're talking here is in your proposal you're talking a fair amount about state expiry a fair amount about state expiry yeah yeah before we go into estate expiration before we go into estate expiration which i know is a big topic i'm still which i know is a big topic i'm still trying to reason about like the trying to reason about like the kind of the wallet experience and user kind of the wallet experience and user experience of having these like experience of having these like multiple dimensions for multiple dimensions for uh for gas like

00:40:00.000 --> 00:40:59.999 align:start position:0%
for uh for gas like what is the expected what is the expected behavior here for behavior here for um um for wallets for wallets to be clear right like tomorrow like to be clear right like tomorrow like single dimension or multi-dimension single dimension or multi-dimension from a white point of view if you want from a white point of view if you want to estimate it's the same problem right like it's like in the single uh like a cost model like you like a cost model like you aggregate everything into one you have aggregate everything into one you have to actually to actually uh you have like a function right that uh you have like a function right that just aggregates just aggregates but you do have to estimate uh your but you do have to estimate uh your bid for each uh things bid for each uh things so it's not uh it's actually like a so it's not uh it's actually like a funny thing that funny thing that you have except maybe the tools you that you have except maybe the tools you have for discovering price are not as have for discovering price are not as great great because it's all implicit because it's all implicit okay so a wallet can do a okay so a wallet can do a pre-flight can tell me like the expected pre-flight can tell me like the expected cost cost i can

00:41:00.000 --> 00:41:59.999 align:start position:0%
i can um um you know you know bid bid bit over um but how do i know how to divide that between like the compute and the i o well like it's the same in you know like i it's the same in you know like i said like it doesn't that question is said like it doesn't that question is not not a question around multi-dimension versus a question around multi-dimension versus single dimension single dimension because that like if you want to because that like if you want to multi like if you want to say like i multi like if you want to say like i want to pay 10 percent more for on top of the market rate right for on top of the market rate right for storage let's say storage let's say because that's where there is contention because that's where there is contention you have to know that you have to know that that's exactly what you have to have that's exactly what you have to have like you have to have the uh yeah market like you have to have the uh yeah market price for storage price for storage if you just layer like 10 flat on if you just layer like 10 flat on everything everything uh you're just going to above overbid

00:42:00.000 --> 00:42:59.999 align:start position:0%
which is maybe okay right like for some people if the fees are relatively low people if the fees are relatively low you know what's the difference between you know what's the difference between you know you know uh you know half a lumen and uh you know half a lumen and two-thirds of aluminum or something i two-thirds of aluminum or something i don't know like historically we've seen that uh like in some situations people are like in some situations people are getting uh are bidding very high on getting uh are bidding very high on certain uh on certain uh for certain patterns um it would be great to maybe um and forgive me if it's already in the cap forgive me if it's already in the cap but just like understanding what is the but just like understanding what is the like the like the uh what's the expected wallet strategy uh what's the expected wallet strategy or client strategy here or client strategy here uh when uh like in terms of user uh when uh like in terms of user experience like what do they present to experience like what do they present to the user

00:43:00.000 --> 00:43:59.999 align:start position:0%
the user and what uh you know what kind of inputs and what uh you know what kind of inputs do they expect from the users yeah sure okay let's talk about state exploration nico nico where is it well so state exploration where is it well so state exploration yeah goes kind of hand to hand with the yeah goes kind of hand to hand with the uh model that i have there for storing uh model that i have there for storing data on the ledger so like the in the data on the ledger so like the in the proposal it's basically like there are proposal it's basically like there are two parts to it there's the how do you two parts to it there's the how do you model model a write a write and uh as in and uh as in and so writers can be a and so writers can be a create a ledger entry or an update create a ledger entry or an update um and how does it work um um and how does it work um like how do we have like the like how do we have like the right price basically for the cost the right price basically for the cost of storage of storage um um so in the proposal what i did is so in the proposal what i did is uh uh i basically used as an approximation for

00:44:00.000 --> 00:44:59.999 align:start position:0%
i basically used as an approximation for um um for the cluster storage the for the cluster storage the bucket list size so like the bucket list size so like the uh uh some basically like the some basically like the ledger is organized into those uh the ledger is organized into those uh like uh 19 buckets like uh 19 buckets i think it's 19 uh and then uh i think it's 19 uh and then uh um it you if you um it you if you if you do a um do a um an update an update or a create you basically append that to or a create you basically append that to the the to the very first bucket in the bucket to the very first bucket in the bucket list list so that's how so that's how um basically like based on the um basically like based on the size of the the total size the or size of the the total size the or total size of the ledger total size of the ledger um um i allocate like a price function uh that kind of looks like an exponential that kind of looks like an exponential from fall uh like basically it starts from fall uh like basically it starts with a slow slope with a slow slope up to uh up to uh some number let's say you say oh like

00:45:00.000 --> 00:45:59.999 align:start position:0%
some number let's say you say oh like validators here kind of determining validators here kind of determining those parameters but like you can think those parameters but like you can think of it as the leaders say oh yeah right of it as the leaders say oh yeah right now we are running on now we are running on drives with uh i don't know like uh drives with uh i don't know like uh 25 25 gigs or 50 gigs of space right um and gigs or 50 gigs of space right um and they're going to basically set they're going to basically set parameters such that parameters such that um um they don't have to they don't have to um um kind of uh kind of uh buy new drives uh you know like if buy new drives uh you know like if there's too much traffic there's too much traffic so so the price function is basically looks in this case like you have like your in this case like you have like your normal slope that goes to normal slope that goes to in like i don't know let's say you have in like i don't know let's say you have 100 gig and it would be like 100 gig and it would be like i want to use maybe like the first 80 i want to use maybe like the first 80 gig at a gig at a rate um rate um that's going to be that's going to be uh uh like a good rate but not like a good rate but not like overly aggressive not like overly aggressive and then the last 20 gigs i want to

00:46:00.000 --> 00:46:59.999 align:start position:0%
and then the last 20 gigs i want to really slow down uh like the growth really slow down uh like the growth so that's right like from 5 looks like so that's right like from 5 looks like this hockey stick type of shape right this hockey stick type of shape right like an exponential and that's kind of the model for pricing the model for pricing growing the bucket list growing the bucket list so so you have that uh for that's four rights you have that uh for that's four rights then the problem is that this is only then the problem is that this is only like uh this is like um saying okay you like uh this is like um saying okay you can add to the bucket list but then uh can add to the bucket list but then uh like like and by the way like if you delete and by the way like if you delete entries entries um um eventually those get collapsed into the eventually those get collapsed into the buckets and so the bucket is uh shrinks buckets and so the bucket is uh shrinks uh in that model a delete you still pay uh in that model a delete you still pay for or delete actually um because delete for or delete actually um because delete is actually adding a little bit of is actually adding a little bit of data to the bucket list of data to the bucket list uh so that's like first thing to note uh so that's like first thing to note here uh

00:47:00.000 --> 00:47:59.999 align:start position:0%
here uh um and then uh yeah what i wanted to get um and then uh yeah what i wanted to get here is uh here is uh as a kind of as a kind of more like a desired property is that i more like a desired property is that i want the price of storage for people to want the price of storage for people to kind of be the same for everybody to kind of be the same for everybody regardless if they regardless if they signed up for you know uh created an signed up for you know uh created an account uh like account uh like two years ago or you know in five years two years ago or you know in five years uh uh it should be it should be uh over time same cost uh over time same cost and um there should be no way to do like and um there should be no way to do like uh to have like a free ride on the on uh to have like a free ride on the ledger right like so you the on the ledger right like so you shouldn't be able to have like shouldn't be able to have like store store i don't know like i don't know like nfts like jpegs whatever nfts like jpegs whatever on chain uh you pay on chain uh you pay for this when uh storage is cheap for this when uh storage is cheap and then uh now you have like uh and then uh now you have like uh something that is cheaper than uh something that is cheaper than uh than even storing in aws right like that than even storing in aws right like that doesn't make any sense

00:48:00.000 --> 00:48:59.999 align:start position:0%
that doesn't make any sense um so this um so this in with that said in with that said there's then a need for having some way there's then a need for having some way of of kind of uh resetting in a way uh the kind of uh resetting in a way uh the the price of uh of storage over time and uh the mechanism that i use there is and uh the mechanism that i use there is state expiration state expiration so state expiration here means that so state expiration here means that you have to basically [Music] [Music] pay for pay for market price of storage market price of storage uh uh to maintain a ledger entry on the to maintain a ledger entry on the like a live in the ledger like a live in the ledger if you do not pay for this uh if you do not pay for this uh for those uh for those uh for this for this for your brands basically for your brands basically you get uh perched that's kind of the you get uh perched that's kind of the choice that i made in this cap

00:49:00.000 --> 00:49:59.999 align:start position:0%
the choice that i made in this cap there are a bunch of other ways uh that there are a bunch of other ways uh that can be done uh that are actually can be done uh that are actually mentioned in the recap in the other mentioned in the recap in the other approaches approaches um but like the um but like the the reason this kind of works with the other reason this kind of works with the other mechanism is that basically like if you mechanism is that basically like if you set a policy for example by if you set a policy for example by default you have to default you have to pay rent like a refresh every year let's pay rent like a refresh every year let's say say uh uh and then and then you don't pay your you don't pay your your renewal after a year your renewal after a year uh yeah your the data gets uh deleted uh yeah your the data gets uh deleted um um and yeah so there's this kind of and yeah so there's this kind of constant churn i guess on the ledger constant churn i guess on the ledger which is kind of a new pattern which is kind of a new pattern and that construction is basically a way to guarantee that everybody to guarantee that everybody in the last year has in the last year has been paying basically something has been paying basically something that is

00:50:00.000 --> 00:50:59.999 align:start position:0%
that is market rate how long do you expect the like the how far in the f like when i like the how far in the f like when i trade a letter entry trade a letter entry how far is the maximum expiration date how far is the maximum expiration date that i can choose or that will get that i can choose or that will get chosen for me in the future this stuff chosen for me in the future this stuff isn't as far as i can tell it's not isn't as far as i can tell it's not specified in the cap how that works so specified in the cap how that works so right now the cap what it right so right now the cap what it says is that it do not says is that it do not so you can renew indefinitely right uh so you can renew indefinitely right uh like the renewal like the renewal window is determined by validators window is determined by validators so that's why i said it's like a so that's why i said it's like a um um like you say every year you have to pay like you say every year you have to pay run run right and then every time you write you right and then every time you write you do an append do an append that happen is valid uh for a year right that's good that's demo then

00:51:00.000 --> 00:51:59.999 align:start position:0%
isn't there a natural trade-off between like renewal time and um like like renewal time and um like fluctuations in this price of storage or fluctuations in this price of storage or are we expecting like this storage cost are we expecting like this storage cost to not um to not um increase too quickly well it depends uh like what we've seen on the current network is uh on the current network is uh ledger size has been increasing actually ledger size has been increasing actually rapidly over the last uh few months rapidly over the last uh few months because of because of like some like some strange token activity strange token activity which is not entirely uh i mean it's which is not entirely uh i mean it's not it's not i mean there are a combination of i mean there are a combination of factors like uh factors like uh one is uh yeah like just price of in one is uh yeah like just price of in crypto assets go you know uh crypto assets go you know uh going down uh but also like when they going down uh but also like when they were were still pretty high you had like an incentive to create more crypto assets so it to create more crypto assets so it basically those things kind of cancel basically those things kind of cancel each other and the growth has been uh each other and the growth has been uh pretty significant

00:52:00.000 --> 00:52:59.999 align:start position:0%
pretty significant so i would say like so i would say like uh seeing a growth rate uh seeing a growth rate um um that that takes you to takes you to uh yeah something that will be uh yeah something that will be you want the market basically to kind of you want the market basically to kind of get to an eco equilibrium right like get to an eco equilibrium right like where where uh uh where like uh you do not have like uh like those weird use cases uh use cases uh appearing on the network if they appearing on the network if they are like are like cheaper than cheaper than right now i think on the right now i think on the network the the problem we have is network the the problem we have is uh yeah we are cheaper than uh yeah we are cheaper than aws fault in some situations isn't there a trade-off here between not necessarily a trade-off but isn't not necessarily a trade-off but isn't there a consequence here that people there a consequence here that people will have to go and touch their data will have to go and touch their data from time to time and from time to time and people are procrastinators and like

00:53:00.000 --> 00:53:59.999 align:start position:0%
people are procrastinators and like let's say that like let's say that like the expiration date is you know when the expiration date is you know when you're in the future or something you're in the future or something uh uh everybody at the end of that year then everybody at the end of that year then has to go and touch all their data and has to go and touch all their data and there's gonna be a huge log jam to get there's gonna be a huge log jam to get it done it done well that's there would be a large jump well that's there would be a large jump if everybody creates their stuff at the if everybody creates their stuff at the same time but you would that's not the same time but you would that's not the case it's going to be case it's going to be you know like basically like the thing you know like basically like the thing that expires in a year is the whatever that expires in a year is the whatever happened today right like happened today right like at the given date at the given date right but i mean like imagine that today right but i mean like imagine that today you have a day with like a lot of you have a day with like a lot of activity like you can look back activity like you can look back historically of stellar's history and historically of stellar's history and there are periods when there were like there are periods when there were like lots of token creations and stuff you lots of token creations and stuff you know there are days when there's know there are days when there's hundreds of thousands of blood draw hundreds of thousands of blood draw entries entries created created um um and then abundant and then abundant well many of them are abandoned but like well many of them are abandoned but like you could imagine a world where they're you could imagine a world where they're not all abandoned right and then what not all abandoned right and then what happens a year in the future happens a year in the future well nothing well people are well nothing well people are incentivized to come back some time incentivized to come back some time between here and then i don't

00:54:00.000 --> 00:54:59.999 align:start position:0%
between here and then i don't see this as see this as any worse than the fact that we have to any worse than the fact that we have to handle load spikes in general yeah i handle load spikes in general yeah i mean we have to handle load spikes and mean we have to handle load spikes and let's bikes may get let's bikes may get replicated but replicated but yeah like what um yeah like what um so what i sketched uh or what we so what i sketched uh or what we sketched actually in the cup which is uh sketched actually in the cup which is uh you know just a more of a strowman type you know just a more of a strowman type of thing because i'm sure we can do of thing because i'm sure we can do better than that is uh better than that is uh is we actually are um kind of uh is we actually are um kind of uh ensuring that uh you do not have like ensuring that uh you do not have like giant spikes so like uh it like i think giant spikes so like uh it like i think the spike would be not be because of the spike would be not be because of situations don't like what you're situations don't like what you're what you mentioned because actually what you mentioned because actually activity from today activity from today uh uh if you have like a comp a if you have like a comp a a um a um a linear like a translation right like a linear like a translation right like an actual just an actual just shapes right like all this activity gets shapes right like all this activity gets translated exactly a year from now i you translated exactly a year from now i you don't have a problem i think the don't have a problem i think the it's just like additional it's just like additional uh cost of running a validator right

00:55:00.000 --> 00:55:59.999 align:start position:0%
uh cost of running a validator right like it's uh let's you say okay i need like it's uh let's you say okay i need to to when i set my limits right the number of when i set my limits right the number of rights rights i actually have to think about well i actually have to think about well actually my capacity in rights is half actually my capacity in rights is half of what i can of what i can add to the ledger because i also need to add to the ledger because i also need to delete right delete right but what can happen is uh more of a like um um if we have different expiration times if we have different expiration times which i actually which i actually kind of kind of briefly talked about there briefly talked about there is that if you have different expiration is that if you have different expiration times times you can have actually different dates you can have actually different dates that that end up expiring end up expiring at the same at the same date and uh and that's for that for date and uh and that's for that for those type of situations you have to those type of situations you have to have an algorithm that kind of uh have an algorithm that kind of uh smooths things out and that doesn't smooths things out and that doesn't actually cause the system to actually cause the system to kind of create a gigantic spike you know

00:56:00.000 --> 00:56:59.999 align:start position:0%
kind of create a gigantic spike you know at a specific dates so just we don't have a lot of time but i just want to ask uh what like the i just want to ask uh what like the biggest question i think that there is biggest question i think that there is like what is the what's the expected like what is the what's the expected behavior here like you know these ledger behavior here like you know these ledger entries are representing financial entries are representing financial instruments instruments um let's say assets just for simplicity um let's say assets just for simplicity even though we have like a standard even though we have like a standard asset contract asset contract and i'm and i'm uh you know paddling on uh you know paddling on shares of something shares of something um um is what is the expectations is what is the expectations or what is what's expectations there's or what is what's expectations there's like am i supposed to like once a year like am i supposed to like once a year like come and touch this like come and touch this is like the operator is like the operator of this financial instrument supposed to of this financial instrument supposed to do that for me do that for me um if um if you know if you look at uh you know if you look at uh you know various common immutable you know various common immutable contracts like uni swap you know and so contracts like uni swap you know and so and i'm holding on like these uni and i'm holding on like these uni tokens tokens what's the expectation here like who's what's the expectation here like who's going to touch these for me

00:57:00.000 --> 00:57:59.999 align:start position:0%
going to touch these for me right so in the right so in the cap i actually let this kind of in the cap i actually let this kind of flexible like uh there's a flexible like uh there's a when you there's actually a special host when you there's actually a special host function to that you can call that is function to that you can call that is basically a basically a rewrite equivalent to like a rewrite uh rewrite equivalent to like a rewrite uh ledger entry um so that you refresh the ledger entry um so that you refresh the that expiration time that expiration time anybody can do that all right like anybody can do that all right like there's no there's no it's not i understand that anyone can do it's not i understand that anyone can do that but who is who do you expect to do that but who is who do you expect to do that that well it depends on the type of users well it depends on the type of users right like uh like power users probably right like uh like power users probably don't want to do it themselves uh like don't want to do it themselves uh like other situations you know if you're if other situations you know if you're like you said like this very you're like you said like this very passive type of person uh maybe you passive type of person uh maybe you should pay somebody to maintain your should pay somebody to maintain your stuff if that's what you really want stuff if that's what you really want uh in other situations i suspect uh uh in other situations i suspect uh if people are not active they probably if people are not active they probably should just be using centralized uh should just be using centralized uh infrastructure

00:58:00.000 --> 00:58:59.999 align:start position:0%
infrastructure like you know contracts or whatever that like you know contracts or whatever that are a little more are a little more centralized centralized i think trump's point is that there's a i think trump's point is that there's a free rider problem here like imagine free rider problem here like imagine that all the people in this room are that all the people in this room are using a single contract right using a single contract right like like which one of us can touch me all of us which one of us can touch me all of us have an incentive to wait until the last have an incentive to wait until the last second and play chicken and hope that second and play chicken and hope that somebody else oh like yeah for a short somebody else oh like yeah for a short contract i think that uh contract i think that uh yeah well it's if it's a shared goodness yeah well it's if it's a shared goodness uh uh like uh like uh just just i i that's not what actually what i asked that's not what actually what i asked john i assumed that john i assumed that uh like each of us will have like our uh like each of us will have like our own ledger entry own ledger entry within that contract within that contract so maybe did i not understand correctly so maybe did i not understand correctly i think i'm concerned about i think i'm concerned about people's money vanishing into thin air people's money vanishing into thin air which is completely reasonable these are which is completely reasonable these are balances and we're just going to delete balances and we're just going to delete them that's not super great i recall there being a proposal to like

00:59:00.000 --> 00:59:59.999 align:start position:0%
i recall there being a proposal to like uh have um uh have um but what happened to this um like when but what happened to this um like when you have a ledger engine deleted it like you have a ledger engine deleted it like gets um gets um dumped into like some kind of merkle try dumped into like some kind of merkle try and you store the hat root of that try and you store the hat root of that try and then like when i want to bring it and then like when i want to bring it back i can like bring in a proof that back i can like bring in a proof that this is what the state was right so this this is what the state was right so this is actually in the appendix yeah the is actually in the appendix yeah the alternative section so this there is alternative section so this there is actually a very detailed uh actually a very detailed uh proposal in ethereum foreign v2 proposal in ethereum foreign v2 uh about uh about this um this um so the complications from so the complications from this archive approach is uh this archive approach is uh is when you uh want to is when you uh want to so like uh restoring is actually yeah so like uh restoring is actually yeah like a trivial like i said like you know like a trivial like i said like you know you have like a maybe a way to do like a you have like a maybe a way to do like a to just to basically store that to just to basically store that entry in inside a entry in inside a merkle tri of source right um and then merkle tri of source right um and then you just need to provide the proof for you just need to provide the proof for that that uh the complexity comes from

01:00:00.000 --> 01:00:59.999 align:start position:0%
uh the complexity comes from uh when you want to create an entry uh when you want to create an entry because you have to prove that because you have to prove that entry doesn't exist in historical data entry doesn't exist in historical data like that was actually archived like that was actually archived and that gets really nasty and that gets really nasty very fast right sure but like that like not wanting to do that doesn't address creating this do that doesn't address creating this question like question like what do you do if your money gets what do you do if your money gets deleted it's uh it's an event like uh like you know if it's a you know if it's a uh like with an issue it's like today if uh like with an issue it's like today if you're on the seller network if you're you're on the seller network if you're sending back to the issuer you know you sending back to the issuer you know you basically basically burn it you can ask the issuer like hey burn it you can ask the issuer like hey sorry i didn't mean to do that but sorry i didn't mean to do that but i didn't burn it but i didn't burn it but like what if you're like but like what if you're like what if it's not like you know an what if it's not like you know an off-chain issuer that you can appeal to off-chain issuer that you can appeal to like what if your unit swap lp tokens like what if your unit swap lp tokens get deleted what do you do it's tough yeah uh like uh you know

01:01:00.000 --> 01:01:59.999 align:start position:0%
it's tough yeah uh like uh you know these those are the rules of the network these those are the rules of the network wait but that's not wait but that's not a great solution long term that's not a great solution long term right like we're gonna have a lot of right like we're gonna have a lot of people people consider the alternative right which is consider the alternative right which is infinite growth of a ledger infinite growth of a ledger with infinite price which one do you with infinite price which one do you prefer i mean like prefer i mean like objectively like objectively like if somebody had a million dollars of if somebody had a million dollars of like uniform lp shares get liquidated like uniform lp shares get liquidated it would have been better to pay for a it would have been better to pay for a million dollars of storage million dollars of storage so that one person yes but like uh what so that one person yes but like uh what about everybody else about everybody else and that person with a million dollars and that person with a million dollars like if they have that it's kind of like like if they have that it's kind of like key management like you have key management like you have procedures to make sure that procedures to make sure that you don't lose your million dollars it you don't lose your million dollars it is currently the case that people is it is currently the case that people with million dollar balances can in fact with million dollar balances can in fact uh lose them because they can lose their uh lose them because they can lose their keys so there's there is keys so there's there is something to appeal to here like it is something to appeal to here like it is actually possible for you to lose it is actually possible for you to lose money just by

01:02:00.000 --> 01:02:59.999 align:start position:0%
money just by misusing the system but misusing the system but what about the other end of the spectrum what about the other end of the spectrum though somebody who doesn't have a though somebody who doesn't have a million dollars they have a small amount million dollars they have a small amount of their balance and they're just of their balance and they're just constantly eating that up by paying constantly eating that up by paying these fees these fees to keep their balance alive i mean it to keep their balance alive i mean it sort of reminds me of like bank accounts sort of reminds me of like bank accounts where you're like bank accounts just where you're like bank accounts just disappearing because you're paying all disappearing because you're paying all these fees yeah they do eventually disappear if you put five dollars in a bank if you put five dollars in a bank account and then wait for 20 years it'll account and then wait for 20 years it'll go away i mean this just points to yeah you're not stirring your balance in the not stirring your balance in the right place right place like this is shared infrastructure like like this is shared infrastructure like if you don't use it you if you don't use it you lose it lose it but nikki you can't just like ignore the but nikki you can't just like ignore the entire entire industry that we're in and you know i'm industry that we're in and you know i'm not pretending that this is not a not pretending that this is not a problem like people are overlooking this problem like people are overlooking this problem problem but but um you know it's um you know it's i think it will be really difficult to i think it will be really difficult to bring people into stellar bring people into stellar telling them oh this is the way it works

01:03:00.000 --> 01:03:59.999 align:start position:0%
telling them oh this is the way it works in selena right so in selena right so it's a fader no it's not selena doesn't it's a fader no it's not selena doesn't actually actually do any of this right now they have rant do any of this right now they have rant no they don't they literally don't no they don't they literally don't charge it right now it's a to be done in charge it right now it's a to be done in the future feature that no one wants so the future feature that no one wants so they're never actually going to get they're never actually going to get around to doing it they have infinite ledger in memory they allow they charge you money to they allow they charge you money to make to allocate space but they never make to allocate space but they never actually reclaim it there's no there's actually reclaim it there's no active garbage collection process so we're over time at this point and i think that means that we have to stop i think that means that we have to stop i mean i know that this is an interesting mean i know that this is an interesting conversation and there's seems like conversation and there's seems like there's a lot to say about there's a lot to say about the concept of expiration the concept of expiration um but i think um but i think we'll push it to next week's meeting and we'll push it to next week's meeting and hopefully have some of this discussion hopefully have some of this discussion on the stellar dev mailing list and here on the stellar dev mailing list and here also in discord in the various john also in discord in the various john cannon channels so if anyone is watching cannon channels so if anyone is watching and has thoughts about that feel free to and has thoughts about that feel free to join the stellar dev mailing list or to

01:04:00.000 --> 01:04:59.999 align:start position:0%
join the stellar dev mailing list or to chime in on the discord here um we'll chime in on the discord here um we'll continue to share work and ideas and continue to share work and ideas and conversations conversations debates as they happen and we will see debates as they happen and we will see you here again soon thanks everybody
