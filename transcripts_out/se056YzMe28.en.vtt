WEBVTT
Kind: captions
Language: en

00:00:00.000 --> 00:00:59.999 align:start position:0%
hello and welcome to the Stellar open protocol discussion in these meetings we discussed core advancement proposals aka caps which are technical specs that suggest changes to the Stellar protocol they're necessary to allow the protocol to continue to evolve to meet the needs of the ecosystem so we live stream these meetings so that anyone who's interested can follow along although i do want to note it is a although I do want to note it is a technical discussion so if you're watching you may want to take a look at watching you may want to take a look at the cap link to in the show description there's also a description in the description all the participants are listed we do keep an eye on sort of the we do keep an eye on sort of the dialogue that's happening in the chat box but the goal really is to talk through questions about the cap that we're discussing which is cat 42 so we will only really address questions if they're directly related to that goal but we will collect them and take a look but we will collect them and take a look at them later too today the cap we're discussing is cap 42 titled multi-part transaction sets it suggests a mechanism that makes it possible to implement different fee

00:01:00.000 --> 00:01:59.999 align:start position:0%
possible to implement different fee structures based on transaction set composition so currently in transaction set composition it can sometimes be heavily biased towards undesirable behaviors including spikes of arbitrage trades that eventually fail this cap basically empowers validators to isolate subsets of transactions that can compete on fees without causing overall fees to increase and it also makes it possible to expand policies to other dimensions in the future so cap 42. again it's linked to before this meeting cap 42 is drafted that's the link to it there it was also discussed on the mailing list and there's a link to the thread to that to there's a link to the thread to that discussion thread as well so our goal today is really just to see if there are any blockers that would prevent us from moving it forward to the next step of its life cycle and i to the next step of its life cycle and i will stop talking and I'm going to turn it over to nico who is the original author of this cap to see sort of what if he has any questions that he wants addressed by this meeting nico take it away hi

00:02:00.000 --> 00:02:59.999 align:start position:0%
hi you can hear me all right so yeah I'm happy that i got all right so yeah I'm happy that I got to get gap 42 because you know it is the to get gap 42 because you know it is the answer to everything of course and in particular the problem with fees and i've already networks in some ways that we're not necessarily happy with and when i say we necessarily happy with and when I say we here it's the community that has been also complaining quite a bit about the number of failed transactions or like patterns that are just not the type of patterns we want to see on the network so anyways like maybe a little additional background that is not in the cap itself is that it's actually on the dev mailing list but not in the cap is that as part of the of this of the of this

00:03:00.000 --> 00:03:59.999 align:start position:0%
we actually had to roll out some changes to overlay in back in december that we're dropping based on a heuristic like but we think are likely to be arbitrage trades and which mitigated to certain extent some of the things that we were seeing at the time but that has a lot of undesirable properties and i think as part of cap 42 my hope and I think as part of cap 42 my hope is that we can actually go and fix the is that we can actually go and fix the some of those aspects that we introduced at the time so in particular like the type of aspect I'm looking forward that to fix here is to fix here is and this is actually true in all networks like it's not actually a Stellar specific type of problem there has been discussions in the past

00:04:00.000 --> 00:04:59.999 align:start position:0%
there has been discussions in the past few months on ethereum and solana i'd like to name a couple on changing these structures when it comes to this kind of spam and when i say to this kind of spam and when I say spam here i mean it's kind of a funny spam here I mean it's kind of a funny thing but it's basically like a natural thing that happens i guess when you have an opportunity to for somebody to make money is based on the cost that you have to submit transactions if you can make let's say a thousand dollars on a trade well you you'd be okay actually to pay 900 dollars in fees because you make some money obviously this is like this is where

00:05:00.000 --> 00:05:59.999 align:start position:0%
this is where like the way you can end up with and at the same time if all if all the transactions on the network are kind of derived on the step of keys then it kind of kills off a whole category of other use cases that you want the network to have so that you want the network to have so for example payments or like simple airdrops or whatever like people want to do that are actually that are actually unrelated to those to this type of trading activity so anyways that's for the background on why this cap and yeah so like the i don't know like yeah so like the I don't know like people had time to look over in more detail at the refreshed cap that i did it yesterday

00:06:00.000 --> 00:06:59.999 align:start position:0%
I did it yesterday like it has actually two parts to it is one part that is extending the what is the what is attached to a transaction set basically so that we can add like new properties to the transaction set and the second part is actually the actual reason for this gap which is the actual reason for this gap which is changing how fees get calculated within a transaction set sorry is the latest version the one that's in the master branch that's in the master branch in the repo 22 hours ago okay yeah that's it yeah and I'm sure there are typos because i kind of updated it typos because I kind of updated it quickly yesterday to make sure that people had time to and to have access to people had time to and to have access to it but it's a early trough summer did you raise a hand yes i did otherwise i tried to be polite yes I did otherwise I tried to be polite but niko didn't see so first of all i think this is

00:07:00.000 --> 00:07:59.999 align:start position:0%
first of all I think this is pretty cool because it takes advantage of something that's unique to the ecosystem and like we can actually prioritize transactions not only based on fees this is very different in other ecosystems because you know validators are kind of like incentivized by transaction awards so they don't have the motivation to actually push these kind of changes it's pretty cool nico i'd like to hear your take on we've been talking a lot about strategy for 2022 recently and things like speed x and things like smart contracts in the future these are like you know more transaction engines or like transactors how will cap 42 interact with these or how do you think they'll like it'll interact with these features yeah that's a good question and i think yeah that's a good question and I think the this is actually in line with when i wrote it i was i thought that when I wrote it I was I thought that we would actually over time kind of create more sea lanes or for lack of better words so an example of

00:08:00.000 --> 00:08:59.999 align:start position:0%
lack of better words so an example of a three lane that i think would make a three lane that I think would make complete sense is to have a separate lane for speed x trades given that they're a lot more efficient compared to existing dex operations and yeah we basically say okay if you have the choice between a speed x you have the choice between a speed x trade and a submitted a managed offer to the network you're going to go and have more space basically on that ledger and for smart contracts I mean it's i mean it gets i think a little more mean it gets I think a little more complicated when we talk about smart on tracks like a very primitive version of this would be well we are going to maybe create a lane just we are going to maybe create a lane just for smart contracts that would be like a simple first step obviously there might be more interesting things that can be done

00:09:00.000 --> 00:09:59.999 align:start position:0%
interesting things that can be done on that front but at the minimum it would be you would create a different kind of free regime right for smartphone tracks I mean I guess the thing is it seems like not really optimal for those use cases like in those use cases it would be much better to just partition the transactions because you could you know then you could just you might want to for example say that all the smart contracts get executed like after all the regular operations right so just kind of having these like intermingled like this index set just seems like it's gonna add a lot of overhead and not be you know what you would want so I kind of have two reservations about this right one is that it just seems like a little bit too complicated for what we really need especially if you want to start having you know blocks with like you know blocks with like 100 000 transactions for example which would be like totally doable with

00:10:00.000 --> 00:10:59.999 align:start position:0%
would be like totally doable with something like speedx if they were all speedx transactions right you're not going to want to also have a added overhead of like sanity checking these index checks and whatever you're just going to want to blast through your array of speed x trades and do like a array of speed x trades and do like a parallel execution of those and I guess the second thing that like bugs me a little bit about this it just seems like very indirect right either we believe that dutch auctions are the right thing or we don't right and maybe dutch auctions aren't the right thing but what we're sort of trying to say like well we're sort of going to keep the dutch oxygen but we're sort of not because we're going to let validators really kind of pick and choose different sets of transactions that are going to pay different that are going to pay different fees and i think the reason is because we want to I think the reason is because we want to filter out spam so like that is a form of censorship maybe it's okay but like maybe we should just like be a little bit more direct and say like be a little bit more direct and say like validators should you know we're gonna just have a way for like different validators to like filter out certain

00:11:00.000 --> 00:11:59.999 align:start position:0%
validators to like filter out certain transactions that we don't think are productive and to the extent that are productive and to the extent that you might not want that you might want to say well what if my transaction is like really important then i should be able to like pay a high fee should be able to like pay a high fee and like get it in the problem is that and like get it in the problem is that this doesn't actually solve that problem right because i could put a right because I could put a maximum fee of you know two to the 32 maximum fee of you know two to the 32 lumens in my transaction but a validator who wants to censor me could like put me who wants to censor me could like put me in my own group with a very low base in my own group with a very low base fee and then put everybody else in a group with a higher base fee and it'll look like you know like the block with that you know like the block with that transaction will like not compare favorably potentially to other blocks so or i mean whatever you could just like or I mean whatever you could just like filter out the transaction anyway so i just i don't see I don't see this doesn't seem like as much it seems like this is partly to solve a problem but also partly to i don't know like for to appear to be I don't know like for to appear to be preserving the dutch auction when we're

00:12:00.000 --> 00:12:59.999 align:start position:0%
preserving the dutch auction when we're not and if we're going to have some extensible way for validators to filter out transactions why don't we just do that in a more straightforward way well so first of all like the when you say so first of all like the when you say like we're not preserving the auction mechanism here what I'm saying is that validators when they nominate those transactions those transaction sets the expectation is that they would actually be doing this type of action in any given group but if they can choose the groups they might as well not you might as well just might as well not you might as well just let validators choose the fee for every transaction and just as well it's the same thing yeah you can do same thing yeah you can do that straightforward thing just annotate each transaction with the fee that would like you know a 32-bit number that's like or 60 on the right list actually was to just annotate every transaction with the fee yeah but that's like that's actually even less transparent in terms of what

00:13:00.000 --> 00:13:59.999 align:start position:0%
even less transparent in terms of what the intent is so that's why i didn't do that so that's why I didn't do that like it's a like that's effectively what you're doing yeah no i know I'm doing that yeah no I know I'm doing that like I'm basically allowing for this but i don't want I don't want people to be doing like arbitrary fee structure per transaction but that's what you're enabling right you're just making i mean i know it's being enabled making I mean I know it's being enabled but that's not what we don't expect for the data to do that we don't expect for the data to do that and actually this is there's a discussion in the later in the document that talks about because like basically today validators can already censor quite a bit like what gets into a transaction set so the example of like following the fee structure today is already not exactly right like if validity doesn't want to do it they just don't do doesn't want to do it they just don't do it

00:14:00.000 --> 00:14:59.999 align:start position:0%
and yeah like here what I'm trying to promote is more of a compact i guess like the yeah the I guess like the yeah the those indexes thing i agree those indexes thing I agree this could be done maybe in a slightly different way i was trying to preserve different way I was trying to preserve the transaction set itself like the existing transaction sets but that's not good either if it turns out that we want to like actually change the order in which we execute transactions then like preserving the transaction set isn't actually that useful right we already so for speed x what we right we already so for speed x what we are what is in the current proposal is to just like we partition on type and is to just like we partition on type and it's actually not we actually keep the transaction set at it as it is like from a serialized version because we can always partition after the fact yeah but it just seems more useful to have it partitioned useful to have it partitioned ahead of time if you have sort of like ahead of time if you have sort of like just totally different phases of block execution i see no

00:15:00.000 --> 00:15:59.999 align:start position:0%
execution I see no intermingling transactions from the different phases that's true so i mean i guess what I'm saying is so I mean I guess what I'm saying is like this will get the job done but i like this will get the job done but i can think of sort of much simpler ways of getting the job done and it seems like this cap is too concerned with sort of like appearances and those appearances you know effectively don't matter when what you're doing is equivalent to something where every whatever validator wins nomination can just like literally set the fee for every transaction so like we're giving value if we're going to give validators that power let's just be upfront about it i mean i thought it was pretty upfront i mean I thought it was pretty upfront i was optimizing again for like ease of audit and like maybe like more compact and like maybe like more compact potentially format but that's true it could be more compact or

00:16:00.000 --> 00:16:59.999 align:start position:0%
that's true it could be more compact or it could be less compact depending on how many if you have an extension point per transaction you at least have an integer their transaction additional well you could just change the transaction set format and add like a four byte feed you format and add like a four byte feed you know no but then less expensive like david can you articulate your david can you articulate your alternative for a second so that we're all on the same page but the thing is that what we are discussing here is more like we're actually not discussing I think we are discussing more like the format of the like the transaction set we're actually not talking i don't think we are discussing talking I don't think we are discussing and maybe we should start with that the premise of allowing to control fees right because i think that's the fees right because I think that's the important one i mean i guess i can see important one I mean I guess I can see two i can see two I can see i don't have a particular sort of I don't have a particular sort of alternative proposal because it seems like we're trying to do two different things and those might be better

00:17:00.000 --> 00:17:59.999 align:start position:0%
things and those might be better served by like two different mechanisms that are you know each that some of which is like you know each that some of which is like maybe less complicated or more efficient to implement than this right so the first thing that we want is we want kind first thing that we want is we want kind of multi-phase block execution down the line so we'd like to lay the groundwork for things like speedx and smart contracts and stuff to coexist with the legacy Stellar transaction format and then the second thing that we want is we want to like weed out spam or you is we want to like weed out spam or you know transactions that are gonna fail a lot and so I just think you know these could be handled in two separate ways or if you wanna have multi-phase blocks let's just have multiple phases in the blocks and potentially have like fees per phase if we want to weed out spam then let's just we want to weed out spam then let's just you know have a way to weed out spam and you know have a way to weed out spam and you know regardless of fees we can just weed out the transactions

00:18:00.000 --> 00:18:59.999 align:start position:0%
without spam without doing it via fees is kind of what we're doing now and fees is kind of what we're doing now and it's actually very hard to keep up with whatever people do like you know people are very clever right they will find better ways to get around it what power does this give us to weed out what power does this give us to weed out spam that we don't have in the existing consensus layer in other words i agree consensus layer in other words I agree that we want to be able to kind of that we want to be able to kind of unilaterally update like update Stellar core without going through the transaction layer or like you know eventually have like a configurable algorithm to weed out spam potentially and maybe different validators have different mechanisms but i don't see how this change to the consensus layer actually gives us more power to do that it may give us some sort of plausible deniability or something that works it actually gives quite a bit of new super powers to the network because

00:19:00.000 --> 00:19:59.999 align:start position:0%
super powers to the network because like i was saying like I was saying earlier like if i have an arbitrage trade if I have an arbitrage trade where i can make a thousand dollars where I can make a thousand dollars ideally i would want people to actually ideally I would want people to actually pay up to a thousand dollars in fees if pay up to a thousand dollars in fees if they are really serious about they if they are really serious about that transaction right now they don't that's not what happens because they're actually competing with the entire pool of transactions and they are filling up entire ledgers and then the ledger fees go up to okay 20 bucks you know for a transaction but that's so that's not a thousand dollars but that's still ridiculously high and 20 bucks is not the number i think and 20 bucks is not the number I think it was like what we saw was close to five dollars i think per close to five dollars I think per transaction so your point is you want the spam you just don't want it to be as profitable like if someone can do like this yeah that's what that's kind of the idea here is that like you know in the current proposal I'm say I'm saying well

00:20:00.000 --> 00:20:59.999 align:start position:0%
current proposal I'm say I'm saying well any decks any operation that may cross an offer is going to be put in a separate bin is going to be put in a separate bin and then that bin we do this the action system on that so and then if you're not interacting with the dex then you're in the you know general group so it's you know that's like first step like you know we can probably do much better than this but you know so why don't we just throw in phases and say that you know like that's what I'm saying that's already what I'm saying sorry I'm saying instead of indexes let's just have straight up phases and let's just execute them in you know like it's just such that like the dex operation oh like you would want also execution order to change i mean like execution order to change I mean like yeah that's fine we want to we want to like we want to like segregate is going to lay the groundwork for paralyzation right and so if we're going to do a change like this or segregating

00:21:00.000 --> 00:21:59.999 align:start position:0%
to do a change like this or segregating operations eventually we're going to want sort of the community of operations in one group and the non-community in another and so the legacy dex operations are exactly never going to be able to make community yeah like but like i think the issue yeah like but like I think the issue here if we have groups in like impact somehow apply order like because we can have transactions with multiple operations i think you can basically take that use I think you can basically take that use that to your advantage to maybe get executed in front of somebody else just because you happen to have the right operation no it's because you don't you'll be people will say that the like we'll flag certain operations like path payment and you know manage offer and whatever and say that these visa any you know there's a first phase which is might have a lower fee but the which is might have a lower fee but the in order to get into the first phase there's certain operations that are off limit like the ones that we can't necessarily make efficient and then in the second phase you can you know have arbitrary like my point is that

00:22:00.000 --> 00:22:59.999 align:start position:0%
have arbitrary like my point is that this forces the to think about those feelings or whatever have those feelings or whatever have to be somehow completely independent or something like and I'm not sure it's like and I'm not sure it's you can always claim that not necessarily you could have like you know like i can see like for speed x like I can see like for speed x like things like that yes you know that makes total sense for the existing transaction subsystem i don't know if transaction subsystem I don't know if well i think well I think we're going to want to have like fast payments and faster payments than we can do order book operations so to just to you know if we're going to be just to you know if we're going to be making this change like why not make it in a way that is will kind of make it in a way that is will kind of facilitate that future where maybe you know payment processing could be parallelized even if order book processing can't be

00:23:00.000 --> 00:23:59.999 align:start position:0%
it's more like I think of this as it's it may be a multi-dimensional thing coffees and then how do you turn that into a how do you turn that into a something that makes sense from a like a an ordering point of view right that's kind of I think I don't i think that's leave it as open-ended as the current draft you could just say that we're going to do that with our groups sorry i think if you say they are groups I think if you say they are groups if you're linking the groups to execution or yeah so you have to apply other groups yeah and so each group has it has a different apply order and a different fee structure and then we can kind of you know have different rules for different groups if you want to execute early and fast then you know you should have a transaction that goes in one group i think we could

00:24:00.000 --> 00:24:59.999 align:start position:0%
that goes in one group I think we could also i mean it might be worth considering I mean it might be worth considering if we're changing the fee structure anyway to have a separate base fee for successful versus failed transactions right no that is wrong like that doesn't work like i don't see like doesn't work it like I don't see like doesn't work it makes things so complicated in the existing transaction subsystem that we've talked about that one a couple times before yeah that would be pretty tricky it's super complicated because you can merge accounts that's kind of one of the reason for example one of the things that can happen you have to refund people at the end yeah it is kind of crazy stuff and it doesn't and this actually doesn't solve the it's not that we want to penalize transactions you're going to have buckets the buckets could they could be morgan your granularity on the fee but that's fine i believe you that fee but that's fine I believe you that would be too hard

00:25:00.000 --> 00:25:59.999 align:start position:0%
for me the most interesting question was your first question david which was just like do we believe in the dutch auction still like let's just like start with that like do we think that even works like do we think that is a even works like do we think that is a system that is a good system for blockchains because like we thought that what like in 2018 well maybe 2018 us was what like in 2018 well maybe 2018 us was wrong right like i wouldn't deny that wrong right like I wouldn't deny that 2018 me was wrong about a whole bunch of 2018 me was wrong about a whole bunch of stuff yeah but that way but the thing is that if you even if you go back to the if you even if you go back to the regular fees it doesn't solve the problem that people are still going to be a stupid number and you take over the ledger agreed but like if we don't believe in the dutch auction thing like one of the things that i mentioned in like my email things that I mentioned in like my email was like we could just like chart instead of like assigning a base fee to different groups we could just say like hey like if you're inserting groups you actually pay your bid so instead of being like a dutch auction now you become like a first price

00:26:00.000 --> 00:26:59.999 align:start position:0%
now you become like a first price yeah i guess like a first price auction yeah I guess like a first price auction basically and then like that that's really punitive basically to people who choose high bid high fee bids but then if you choose those high fee bids you are guaranteed to pay them basically so it avoids that situation where it's like oh there's a thousand dollar opportunity you build 900 dollars but you end up paying 20. it's like no i but you end up paying 20. it's like no i mean transactions right so this is one thing that's changed now so one of the reasons why you might want to have bid a fairly why you might want to have bid a fairly high amount in 2018 is because you were like pre-signing a transaction right and now we have a solution to that it's not just that but also like for like clients like it really avoids having to keep track of market activity like to keep track of market activity like the activity like and especially if you start to say okay the predicting fees is basically is becoming even harder i think you have to have this kind of I think you have to have this kind of mechanism well no but i mean what this

00:27:00.000 --> 00:27:59.999 align:start position:0%
mechanism well no but I mean what this current mechanism is basically you say the maximum fee and then whichever validator wins nomination decides how much you actually pay right like that's what this is going on but it's that's what this is going on but it's sort of right looks like a dutch auction kind of because there's these groups are you running the dutch auction but like if i can kind of if I can kind of pull people into different groups who are paying who are gonna end up paying different amounts for the same good then it's like i might as well just set the it's like I might as well just set the price you know it just it seems like it's trying to look like it's still a dutch auction when it's not so let's just be more directly what it is which is validators setting fees per transaction but it's like saying oh yeah like because like validators may decide to not do what we want people to do then let's throw away the whole thing right and make plans as complicated as possible no I'm just saying like figure out what we want validators to do and just directly give them that power

00:28:00.000 --> 00:28:59.999 align:start position:0%
just directly give them that power instead of no but like that that's fine like we already like that's the point of this cap is we give them that power but this cap is we give them that power but then saying we also get rid of the bidding aspect well validators could decide to run a dutch auction right the point is if we if we're giving values the discretion to set fees then one of the things they could do is run a dutch auction but there's no reason to still have like to have cap five somehow wired into the consensus layer cap five is now going to be true yeah that's yeah exactly that's actually that's what the cap 42 already says it there's no more search prices we're running these we're search prices we're running these dutch auctions per group which just seems like an inefficient we're adding this unnecessary level of indirection right we're giving we're indirection right we're giving validators the ability to set the fee of every transaction and then we're doing it in this like weird clumsy bucketing way that you know is gonna require you to like check large sets of integers that they're not overlapping and all this other stuff which is just

00:29:00.000 --> 00:29:59.999 align:start position:0%
and all this other stuff which is just like you know why just like set the fee per transaction but how would you resolve contention if it came up like if everyone submitted the same kind of transaction all at once and there's contention for ledger space in that situation it's just you know highest it's basically the normal you know like I'm speaking at auction or a first price auction but just not at the consensus layer like it would be the block the nominator would be the one who's basically setting the fee rules for the block as opposed to having happen at the consensus layer and like you don't like when I was saying that like we don't necessarily want to do the dot auction i wasn't want to do the dot auction I wasn't saying we don't want to do it for any saying we don't want to do it for any transactions but what do you do but there's no reason you can't implement a duns auction like as you're nominating a block right but we might want to like for certain types of transactions that we think are very benign we might actually want to mandate it basically leave it giving clients the opportunity to do very simple fee estimation

00:30:00.000 --> 00:30:59.999 align:start position:0%
to do very simple fee estimation and then if you're trying to do something that's very you know profit generating deliberately profit generating but not otherwise useful then you have this more complicated fee situation to deal with and you pay higher fees okay but if you want to audit that then it's going to be easier to segregate the transactions right i think I'm not opposed to that at all we think I'm not opposed to that at all we can say like i could definitely see a can say like I could definitely see a thing where we say like at the consensus layer you know group zero is transaction envelope group zero is going to be not going to allow order book things and it's gonna have to be a book things and it's gonna have to be a dutch auction right and then like number one you know group one is like discretionary sure yeah that i would be super comfortable with that I would be super comfortable with that but like for me it just comes back to but like for me it just comes back to like do we want to do stuff like that do like do we want to do stuff like that do like if we want to keep the dutch auction aspect of it i think we should probably aspect of it I think we should probably mandate it in some parts and if we don't mandate it in some parts and if we don't want to keep it then we should just be want to keep it then we should just be honest like you were saying and just like not even have any pretense of doing it

00:31:00.000 --> 00:31:59.999 align:start position:0%
not even have any pretense of doing it and just say okay like validators you choose whatever you want and this is like cat 42 supports this basically my argument here would be just like remove the directions for what you're supposed to do and say like do whatever you want i mean say like do whatever you want I mean like to mandated you have to actually include whatever rule is used for partitioning has to be part of the protocol then exactly at least which makes it into that one subset the rest of them which means that for any change we want to make to this partitioning scheme is a protocol change only to that one partition well like it could be a parameter too it well like it could be a parameter too it could be like you know a bitmap of the could be like you know a bitmap of the operation types that are allowed in like actually the first version of this cap was not it was not operation type it cap was not it was not operation type it was based on which markets you would will you be you know doing so it was much more granular

00:32:00.000 --> 00:32:59.999 align:start position:0%
granular so that's not the type of thing you would want to you can encode as a parameter it's but those would be the things that aren't in so basically like when you do a path payment you are not guaranteed to pay dutch auction to get the dutch auction treatment if you do a simple payment you're guaranteed to get the dutch auction treatment that's exactly the kind of thing I'm talking about and then of course whether or not you get the dutch auction or something close to it would depend on the particular validator and that validator could decide it depends on the particular assets that you're touching do we think that changing the fee structure for these kinds of operations meaning like these non the non super benign very efficiently implementable operations would make a big difference i think I think that david you were already questioning that like is this enough control to discourage those kinds of things or

00:33:00.000 --> 00:33:59.999 align:start position:0%
discourage those kinds of things or split things up appropriately is that right is the fees the thing that is that right is the fees the thing that matters is the segregation in terms of number of those operations that can enter the transaction set the right thing to control like what is the thing that matters I mean I you know I think that oh yeah of course we want to get you know we want to some of this is going to be subjective right it's going to be like validators are gonna have an idea that there's some stuff that is you know more valuable to the network than other stuff right and then people creating transactions are gonna have some idea of how important their transactions are which is going to be reflected in the fee or the max fee that they're willing to bid for that transaction

00:34:00.000 --> 00:34:59.999 align:start position:0%
willing to bid for that transaction and so i think we kind of and so I think we kind of we like the idea that you know if my we like the idea that you know if my transaction's really important i can transaction's really important I can like pay a lot of money and get it like pay a lot of money and get it included this cap doesn't actually guarantee that right because i could bid like a large right because I could bid like a large amount for my transaction but the validator could you know either not included or could include it in a transaction set with a low a subset with a low base fee and then this my the block that contained my transaction would like compare unfavorably to a block that has like higher fees for other transactions even though their max fees are lower the way that so that we actually almost never compare blocks it's true that's true so and then the spell that's actually already the spell that's actually already going to happen today so i don't want going to happen today so I don't want that okay i suppose there's not really much I suppose there's not really much guarantee that any validator will include your trend like you can imagine

00:35:00.000 --> 00:35:59.999 align:start position:0%
include your trend like you can imagine that david you know you like want to send justin a payment or something to like close out a payment channel or something and you're willing to pay like a million xlm to do it yeah but like maybe me xlm to do it yeah but like maybe me and nico and tomer are the validators and we're just like yeah maybe not and then we just like refused to include your transaction is that you know if some validator eventually if some validator eventually if there's some validator willing to do it and that validator eventually wins consensus then it will your transaction will see the light of day yeah right you need consent you need some offline agreement basically to really censor transactions and that's that doesn't change this cap i don't think this cap can change that I don't think this cap can change that it changes it a little well no i guess not really

00:36:00.000 --> 00:36:59.999 align:start position:0%
well no I guess not really not any amount that matters i think we have not heard from lee and not much from tumer where do you guys kind of stand on all of this I kind of want to understand it sounds like david has a much like more simplified approach I'm trying to understand like from a mechanical perspective what this looks like what is what are the protocol changes required if any for validators to start assigning random fees or not random fees to transactions to transactions yeah I'm yeah i think about this but i think like yeah I think about this but I think like david has a point if we're just like pretending with this like group based with this like group based approach you know like we can implement that logic without that so

00:37:00.000 --> 00:37:59.999 align:start position:0%
I mean like so the group thing is more like yeah like i don't really care that's more like I don't really care that's more like i said it's a sterilization format like I said it's a sterilization format problem like i think we still have problem like I think we still have like the new thing i think the new like the new thing I think the new point that david raised which is interesting is should we basically hard code the this split that is in the proposal right now as an optional thing so that should like this split being that there's like a presumption there that non-decks operations or yeah transactions we're not going to need to do to

00:38:00.000 --> 00:38:59.999 align:start position:0%
we're not going to need to do to split that further you know oh sure or without going through consensus sure i guess I guess put another way do we feel that for certain kinds of transactions people should be guaranteed the dutch auction and the validator shouldn't have discretion that's the question i was wondering too that's the question I was wondering too david and i think nico thinks the answer to that I think nico thinks the answer to that is yes i am also inclined to think the answer I am also inclined to think the answer to that is probably yes I'm not sure maybe I'm wrong that niko thinks that but i think he thinks that but I think he thinks that based on his reaction when we were talking about removing the dutch auction i mean i like the I mean I like the that system that you basically express you know a maximum bid and then you and then it's the job of adidas to try and then it's the job of adidas to try to minimize this for you okay so this does not currently guarantee that this does not currently guarantee that right cap 42.

00:39:00.000 --> 00:39:59.999 align:start position:0%
right cap 42. so the well there is no I guess like the yeah there's no guarantee either even with the current system right like i could basically decide as a right like I could basically decide as a validator or all the ideas could decide that they're going to group all expensive transactions in one ledger i know you transactions in one ledger I know you know that ledger is the stupid ledger right yeah at least you know that is a valid dutch at least you know that is a valid dutch auction right you know at least you know there's you know 999 other operations that are willing to pay that base fee or whatever right but I mean or you could say like fine you don't really have that guarantee because you know the validators could hold the expensive operations but it's the so i guess like maybe what it's the so I guess like maybe what you're getting at is we're effectively giving validators the

00:40:00.000 --> 00:40:59.999 align:start position:0%
we're effectively giving validators the ability to just set a different fee for every transaction then let's just do that and not like wrap it up in some that and not like wrap it up in some kind of auction thing no but i can't so either yeah i mean no but I can't so either yeah I mean like it's i agree but like the like it's I agree but like the alternative to this would be to say okay like because your point about okay I'm going to have a transaction where i put a fee of million dollars where I put a fee of million dollars right and i mean as a I mean as a transaction submitter i would feel very nervous about this I would feel very nervous about this because now if i have a because now if I have a leader that wants to play a joke on me leader that wants to play a joke on me they can and they would actually pay nothing i mean nobody's actually i mean only that mean nobody's actually I mean only that one person is going to pay one million right and that's what cap 42 lets you do right and that's what cap 42 lets you do so right now i have 42 lets you do that so right now I have 42 lets you do that i the I the original version that i wrote was original version that I wrote was actually requiring that those groups would be of a minimum size to actually avoid this type of situation

00:41:00.000 --> 00:41:59.999 align:start position:0%
to actually avoid this type of situation but i thought it was maybe not but I thought it was maybe not so basically you require to do this those this bidding system on at least some number of transactions of transactions but yeah i don't know but yeah I don't know that would maybe mitigate this and it kind of makes both versions work in a it kind of makes both versions work in a way because now you can have arbitrary sets or arbitrary groups where you do this bidding thing I mean i wonder if the right thing I'm just kind of breaking it down that this is not very nice in terms of like how much of the ecosystem it impacts but i mean i almost ecosystem it impacts but I mean I almost wonder if you sort of you want to give wonder if you sort of you want to give people submitting transactions a choice so if i had transactions a choice so if I had some flags on my transaction then i could say hey I'm willing to i prefer the validators play with the

00:42:00.000 --> 00:42:59.999 align:start position:0%
I prefer the validators play with the priority of my transaction delayed or i prefer that validators play with the fee that I'm paying or something right and so then you'll either you'll depending on what you select you'll either pay a potentially very high fee if validators want you to or you'll get de-prioritized if they don't like the fact that it's a if they don't like the fact that it's a path payment or that it's touching some asset that we think is a spam asset yeah i strongly oppose that idea i yeah I strongly oppose that idea i think that we have a problem right now with the dutch auction where people don't understand it because it's so different from other networks and understanding like adding other dimensions to like prioritization besides just to like prioritization besides just feet is just gonna confuse the hell out of people well what if there's just one bit which says i want to participate in the dutch says I want to participate in the dutch auction or i want to pay this fee

00:43:00.000 --> 00:43:59.999 align:start position:0%
auction or I want to pay this fee and so then like yeah why i mean i still like yeah why I mean I still understand why you would want people to like what the current contract like what the current contract with the network is that you put a fee bid and you may pay up to this fee bid and you may pay up to this number that's good that's the contract it's fairly simple i think to understand fairly simple I think to understand maybe you don't maybe it's harder to understand when my transaction is going to be included but at least you know it's the contract is simple yeah i agree with niko i think that like yeah I agree with niko I think that like the current contract doesn't the current contract doesn't have to change even if the underlying mechanism changed like basically this is the amount the maximum amount I'm willing to pay maybe if it's an opportunity I'm going to pay the whole thing maybe it's for something else you're going to pay like the validators can change the logic without having to have like wallets start like exposing a weird interface that's true but we are the validators are gonna have to make a decision right they're gonna say

00:44:00.000 --> 00:44:59.999 align:start position:0%
make a decision right they're gonna say like either you're willing to pay a lot and either I'm going to you know charge you a lot or I'm gonna charge you a lot or I'm gonna charge you the same as everybody else right so we're now giving the validators that discretion and you know if we think that the if we and you know if we think that the dutch auction is a good thing and we think that certain transactions should be guaranteed the dutch auction I'm not sure i believe dutch auction I'm not sure I believe this right but it's plausible like I'm not taking it aside then maybe make it explicit in the in then maybe make it explicit in the transaction itself and as opposed to I don't see how like that you can make it really explicit i mean like you have it really explicit I mean like you have to have a market to afford this to work that's why i was saying like maybe it's that's why I was saying like maybe it's more like i ensuring that people are actually part

00:45:00.000 --> 00:45:59.999 align:start position:0%
ensuring that people are actually part of a market when they are doing this building they expect some bidding like you know I want to be competing with at least five people or ten people i don't know five people or ten people I don't know what the number is but like sometimes something like that can we go back a little bit to this like if we actually combine the groups and apply order like make them the same thing I think this may create it depends if like how many groups we have but like i think if we think that people are going to be if we think that people are going to be if we want people to add more groups of if we want people to add more groups of our time doesn't that leave too much does that give too much kind of power

00:46:00.000 --> 00:46:59.999 align:start position:0%
does that give too much kind of power to validators now that they can control apply order right now they don't really control that well i mean the rules for well I mean the rules for apply order could go through consensus potentially or some rules i mean so like i or some rules I mean so like i could definitely imagine a situation where like you know in the long term there's like four groups you know there's speed x there's fast legacy operations there's slow legacy operations and then there's like smart contracts yeah exactly like so those groups i yeah exactly like so those groups I understand those groups i don't understand those groups I don't understand how inside those groups fees would impact apply order okay two things to interject here one there's actually already a cap about arbitrary transaction orders so we should probably all review it at some point and incorporate that information into this conversation because we probably already argued about this like

00:47:00.000 --> 00:47:59.999 align:start position:0%
probably already argued about this like three years ago and since we didn't do that for all the reasons so we should learn what we learned back then it's 14. it was written by jeremy I don't remember what it says either i just remember it having it I just remembered having the word adversarial transaction ordering and I'm like ah yes the i think the word adversarial made the I think the word adversarial made this pretty unpopular but the second thing i want to add is like the second thing I want to add is like i think probably to make this grouping I think probably to make this grouping thing sane the fees and the groups would have to be the fees and the groups would have to be on different like unorthogonal axes otherwise like this is gonna just be a nightmare i think nico nightmare I think nico probably okay what's that what's your sorry i missed your comment sorry I missed your comment like you were saying like how would the fees impact the ordering within the groups and like you know what about the number of groups and stuff like that i mean of groups and stuff like that I mean probably like fees and apply and like

00:48:00.000 --> 00:48:59.999 align:start position:0%
probably like fees and apply and like phases should be separate kind of grouping or tagging or whatever system i know that's what I'm saying like i don't like the idea of mixing the two I don't like the idea of mixing the two concepts yeah i don't think they concepts yeah I don't think they should be mixed i think that would be a should be mixed I think that would be a mess that'd be really complicated right but like maybe the things that maybe as part of those changes if we mess with the transaction set we should make it that it's easy to add more phases i guess phases I guess even if we're not adding a phase with this change because we don't have the need for that right now i think we i mean i can see given that I think we I mean I can see given that I'm adding this generalized transaction set thing like maybe it should be easier to have phases to it now i don't think it's that easy now I don't think it's that easy actually because it's using this index thing and yeah maybe i should just ditch that and yeah maybe I should just ditch that and then instead it's like you actually have actual

00:49:00.000 --> 00:49:59.999 align:start position:0%
have actual vectors and yeah i would like that more so we are getting close to the hour and i guess my question is you know it seems I guess my question is you know it seems like there are there's more to discuss than there's more to think about what's the best way to move the discussion forward i mean i think there are like a few so I mean I think there are like a few so there are like a few interesting questions here there's the yeah the action system like what do we do with this and then there's the actual structure of the like how can we do what type of groups can exist or not exist outside of the protocol so i think there's also work that so I think there's also work that there's something that doesn't need to go through the transaction there i don't go through the transaction there I don't know how you guys have like what the current state of this is but i think

00:50:00.000 --> 00:50:59.999 align:start position:0%
current state of this is but I think that there's going to be some configuration some way of configuring Stellar core to say like which transactions we think are you know should be prioritized and so that doesn't need to go through the consensus layer that's what's going to like you know basically implement the discretion that validators have but having some part of that kind of design sketched out i think would potentially sketched out I think would potentially inform the debate over what the consensus layer like transaction segregation mechanism should look like there is a like a super duper ultra primitive version of that already exists super primitive but i do think it'd be interesting to but I do think it'd be interesting to kind of think about like what could we actually make like what could we actually make expressible in a pretty simple way because like if there's nothing that's really useful that we can express then that really lends itself towards saying like okay like these things probably like too complicated to express they're not configurable validators

00:51:00.000 --> 00:51:59.999 align:start position:0%
they're not configurable validators won't be able to do it etc whereas if we won't be able to do it etc whereas if we can think of lots of useful things that you can express simply and it's like actually like we should feel free to give validators a lot of power to make you know same decisions and they can configure it easily i think that matters a lot i mean like I think that matters a lot I mean like the yeah like the i guess they're like the yeah like the I guess they're like different things here there's like because my what i thought here my intent here was what I thought here my intent here was not necessarily to make it like something that you would necessarily you know do in as a config right it's not like a in as a config right it's not like a config file that people deploy i thought config file that people deploy I thought it would be more of a you make actual changes to Stellar call and then those things get you know i mean i think a config file you know I mean I think a config file would be better because i mean it would be better because I mean it would the point is it's better but it's it gets a lot more complicated it's it gets a lot more complicated in terms of i mean i really changing in terms of I mean I really changing Stellar changing consensus of course is easier right and we'd rather tell people hey you know because of this thing like

00:52:00.000 --> 00:52:59.999 align:start position:0%
hey you know because of this thing like please compile the you know this latest version of Stellar core which is still the same protocol version but that's still pretty heavyweight so it would be nice at least to rule out it would be nice at least to rule out that a config file isn't sufficient how do you feel about a hook david like how do you feel about a hook david like what we do for history maybe yeah because then we could just like basically just like vomit out the set of transactions that we have in memory at your script and say like hey man this is your problem you figure it out yeah or you know it could even be if we keep care about efficiency it could be like a plug-in or something right that you know but like what does it look like maybe the plug-in just like assigns a small integer to each transaction which is it's sort of it's bucket number or something and then there's a config file that assigns minimum fees or relations of fees between buckets i don't know like and between buckets I don't know like and right now I'm just making some up so but right now I'm just making some up so but to have at least one concrete design on

00:53:00.000 --> 00:53:59.999 align:start position:0%
to have at least one concrete design on the table not an implementation just a design i think would design I think would make the would make it a lot easier to discuss cap 42 and the various possible changes to cap 42 in like its concrete context I mean like the other thing that would happen that sounds like it's getting into let's see how like it's getting into let's see how what type of complicated policy we would want to implement and is too expressive enough or is it too complicated for the things that we want to do well like i mean like which policy like I mean like which policy like i had a previous example of policy in I had a previous example of policy in there that i thought was way too there that I thought was way too complicated in the context of this guy because for me what i want the cap because for me what I want the cap to be is actually what are the consensus changes like i like the things that are really like I like the things that are really part of the protocol i don't in a way like i want to

00:54:00.000 --> 00:54:59.999 align:start position:0%
I don't in a way like I want to kind of set aside as much as possible to kind of set aside as much as possible yeah like those type of more complicated changes that actually we can do later on and this doesn't require a cap no but i mean i just you know i want to no but I mean I just you know I want to know like you know like for example i don't know if this is true but maybe what we want to do is we want to keep what we want to do is we want to keep track of sort of for each asset the fraction of failed you know path payments that involves that asset and you know and then for when it crosses a you know and then for when it crosses a certain threshold we want to like you know de-prioritize or raise the cost of transactions involving that asset or you know just i but now I'm just making that know just I but now I'm just making that up right but like let's have an actual concrete thing of like places where this would be useful and how it would work in would be useful and how it would work in Stellar core and once we have that i think it'd be and once we have that I think it'd be easier to say like well do we really need cap 42 or would it be simpler just need cap 42 or would it be simpler just like set the price for each transaction or to have like separate arrays that would then also facilitate the phase thing because it could be that the phases and the fees for spam should

00:55:00.000 --> 00:55:59.999 align:start position:0%
phases and the fees for spam should be solved by two totally separate mechanisms or it could be that like we should have one mechanism and like cap 42 should basically like solve both problems at once and i actually don't problems at once and I actually don't know right now with like so few use cases whether we should be doing this as like two separate mechanisms or a single one the other thing I'm interested in here is just like what's our goal like is our goal to have less of these transactions to have them pay more to have a better distribution of transactions what is the thing we're actually trying to achieve i feel like we'd have more ease I feel like we'd have more ease agreeing on the mechanism if we all agreed on the thing that we wanted to happen i don't think we all necessarily have I don't think we all necessarily have the same picture of what we want to happen i don't even know if someone I'm happen I don't even know if someone I'm not sure if i even have a picture of not sure if I even have a picture of what i want to happen what I want to happen i don't like what's the current I don't like what's the current situation but what is the good situation i don't know and that's what i mean by the don't know and that's what I mean by the concrete thing like let's just say like

00:56:00.000 --> 00:56:59.999 align:start position:0%
concrete thing like let's just say like here's what Stellar core could do here's a couple of scenarios in which the network's not going to behave well and here's how it would be solved with this plus some cap 42 like thing and then we can even we want more examples like the like even we want more examples like the one right now in the cap is the we can do groups based on dex activity so you want more of that yeah and i want but i also want to and I want but I also want to maybe know like how this would be implemented in Stellar core like again like config file change to siebel's plus plug-in like you know because is it is plug-in like you know because is it realistic like how often can we get people to like compile new versions of we get a new version every month of we get a new version every month right so that's why I'm like do we need people to go and mess with do we need people to go and mess with that more often than that i don't know that more often than that I don't know in a super uncoordinated way I don't know I could do it very

00:57:00.000 --> 00:57:59.999 align:start position:0%
I don't know I could do it very interesting do you know people actually do upgrade every month or just for the new protocols i mean like every yeah at most it's I mean like every yeah at most it's like people yeah like upgrade after like three months or something yeah so like if people are only upgrading like for the new version of the protocol then there's no benefit to removing this from the consensus layer or in order to remove it or there would be benefit only if it could be like done by configuration file as opposed to like a recompilation right but if you're saying like with the protocol upgrades every six months and people upgrade every three months like okay then maybe there's some benefit i mean like I mean like so validators do upgrade like you keep their notes up to date I'm like you keep their notes up to date I'm not talking in general yeah like people the bulk of people takes like two to three months to upgrade there's pretty big variation some people upgrade insanely fast i mean the coin upgrade insanely fast I mean the coin quest guys have occasionally updated before us i think

00:58:00.000 --> 00:58:59.999 align:start position:0%
before us I think but not everybody is so excessively diligent so excessively diligent yeah all right all right okay i think we're out of time for today okay I think we're out of time for today but i feel like there are some open but I feel like there are some open questions and suggestions for things to sort of work on next and i feel like ideally we start to and I feel like ideally we start to bring those to the mailing list and plan to reconvene with some new thoughts hopefully the next meeting in two weeks so good all right awesome thanks everybody see you soon thank you thanks for watching out there

00:59:00.000 --> 00:59:59.999 align:start position:0%
